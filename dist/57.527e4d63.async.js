(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[57],{UeWE:function(e,t,a){"use strict";var r=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var l=r(a("wCAj"));a("+L6B");var o=r(a("2/Rp"));a("IzEo");var i=r(a("bx4M"));a("fOrg");var s=r(a("+KLJ"));a("5NDa");var d=r(a("5rEg"));a("2qtc");var c=r(a("kLXV")),p=r(a("p0pE")),u=r(a("2Taf")),f=r(a("vZ4D")),m=r(a("l4Ni")),h=r(a("ujKo")),y=r(a("rlhR")),w=r(a("MhPg"));a("y8nQ");var b,g,E,S,v=r(a("Vl3Y")),I=n(a("q1tI")),k=a("MuoO"),F=a("w7Oj"),D=r(a("XZXw")),R=r(a("uBa5")),_=r(a("prrH")),C=a("+n12"),T=(b=(0,k.connect)(function(e){return{personnel:e.personnel,loading:e.loading.models.personnel}}),g=v.default.create(),b(E=g((S=function(e){function t(){var e,a;(0,u.default)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return a=(0,m.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(n))),a.state={dataFormType:"",queryFormDisplay:!1,dataFormID:"",enterpriseID:"",data:null,selectedRows:[]},a.onItemEditClick=function(e){var t=a.props.location.query.enterprise_id;a.setState({dataFormID:e.record_id,dataFormType:"E",enterpriseID:t,data:e}),a.props.dispatch({type:"personnel/changeFormVisible",payload:!0})},a.onItemDetailClick=function(e){a.setState({dataFormID:e.record_id,dataFormType:"Detail"})},a.onAddClick=function(){a.setState({dataFormID:"",dataFormType:"A"})},a.onTableChange=function(e){var t=a.props.location.query.enterprise_id;a.props.dispatch({type:"personnel/fetch",payload:{enterprise_id:t},pagination:{current:e.current,pageSize:e.pageSize}}),a.clearSelectRows()},a.onResetFormClick=function(){var e=a.props.location.query.enterprise_id;a.props.form.resetFields(),a.props.dispatch({type:"personnel/fetch",payload:{enterprise_id:e},pagination:{}}),a.clearSelectRows()},a.handleTableSelectRow=function(e,t){a.setState({selectedRowKeys:e,selectedRows:t})},a.clearSelectRows=function(){var e=a.state.selectedRowKeys;0!==e.length&&a.setState({selectedRowKeys:[],selectedRows:[]})},a.onSearchFormSubmit=function(e){e&&e.preventDefault();var t=a.props.form.getFieldsValue(),r=a.props.location.query.enterprise_id;a.props.dispatch({type:"personnel/fetch",payload:(0,p.default)({},t,{enterprise_id:r}),pagination:{},enterid:r}),a.clearSelectRows()},a.onItemDeleClick=function(e){c.default.confirm({title:"\u786e\u5b9a\u5220\u9664\u5458\u5de5\u3010".concat(e.real_name,"\u3011\uff1f"),okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:a.onDeleOKClick.bind((0,y.default)(a),e.record_id)})},a.onDeleOKClick=function(e){a.props.dispatch({type:"personnel/delePerson",payload:e}),a.clearSelectRows()},a.submitPersonInfo=function(e){var t=a.props.location.query.enterprise_id;a.props.dispatch({type:"personnel/submit",payload:e,enterpriseID:t}),a.clearSelectRows()},a.onQueryFormToggleClick=function(){var e=a.state.queryFormDisplay;a.setState({queryFormDisplay:!e})},a}return(0,w.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.query.enterprise_id;this.props.dispatch({type:"personnel/saveEnterid",payload:e}),this.props.dispatch({type:"personnel/fetch",payload:{enterprise_id:e},pagination:{}})}},{key:"renderSearchForm",value:function(){var e=this.props.form.getFieldDecorator;return I.default.createElement(F.SearchCard,{form:this.props.form,onSearch:this.onSearchFormSubmit,onReset:this.onResetFormClick},I.default.createElement(F.SearchItem,{label:"\u6635\u79f0"},e("nickname")(I.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165"}))),I.default.createElement(F.SearchItem,{label:"\u771f\u5b9e\u59d3\u540d"},e("real_name")(I.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165"}))),I.default.createElement(F.SearchItem,{label:"\u8054\u7cfb\u7535\u8bdd"},e("phone")(I.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165"}))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,r=t.personnel,n=r.data,d=n.list,c=n.pagination,u=r.formVisible,f=this.state,m=f.selectedRowKeys,h=f.selectedRows,y=[{title:"\u5934\u50cf",dataIndex:"photo",key:"photo",width:100,render:function(e){return I.default.createElement("img",{src:(0,C.getPhoto)(e),alt:"",style:{width:60,height:60}})}},{title:"\u771f\u5b9e\u59d3\u540d",dataIndex:"real_name",width:150},{title:"\u6635\u79f0",dataIndex:"nickname",width:100},{title:"\u6027\u522b",dataIndex:"gender",width:150,render:function(e){switch(e){case 1:return"\u7537";case 2:return"\u5973";default:return"\u672a\u77e5"}}},{title:"\u90e8\u95e8\u540d\u79f0",dataIndex:"dept_name",width:150},{title:"\u624b\u673a\u53f7",dataIndex:"phone",width:150},{title:"\u89d2\u8272",dataIndex:"user_type_name",width:250}],w=(0,p.default)({showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return I.default.createElement("span",null,"\u5171",e,"\u6761")}},c),b=[{title:"\u4f01\u4e1a\u7ba1\u7406",href:"/enterprise/enterpriselist"},{title:"\u4f01\u4e1a\u5458\u5de5\u7ba1\u7406",href:""}];return I.default.createElement(D.default,{title:"\u4f01\u4e1a\u5458\u5de5\u7ba1\u7406",breadcrumbList:b},I.default.createElement(i.default,{bordered:!1},I.default.createElement("table",{width:"100%"},I.default.createElement("tbody",null,I.default.createElement("tr",null,I.default.createElement("td",null,I.default.createElement(s.default,{type:"info",showIcon:!0,message:"\u5f53\u524d\u6240\u5728\u4f01\u4e1a\uff1a".concat(this.props.location.query.name,"\uff0c\u4f01\u4e1a\u603b\u4eba\u6570:").concat(this.props.personnel.data.pagination.total)})))))),I.default.createElement(i.default,{bordered:!1},I.default.createElement("div",{className:_.default.tableList},this.renderSearchForm(),I.default.createElement("div",{className:_.default.tableListOperator},1===h.length&&[I.default.createElement(o.default,{key:"edit",code:"edit",icon:"edit",onClick:function(){return e.onItemEditClick(h[0])}},"\u7f16\u8f91"),I.default.createElement(o.default,{key:"dele",code:"dele",icon:"dele",onClick:function(){return e.onItemDeleClick(h[0])}},"\u89e3\u9664\u8ba4\u8bc1")]),I.default.createElement("div",null,I.default.createElement(l.default,{rowSelection:{selectedRowKeys:m,onChange:this.handleTableSelectRow},loading:a,rowKey:function(e){return e.record_id},dataSource:d,columns:y,pagination:w,scroll:{x:1450},onChange:this.onTableChange})))),u&&I.default.createElement(R.default,{id:this.state.dataFormID,type:this.state.dataFormType,enterid:this.state.enterpriseID,formData:this.state.data,submit:this.submitPersonInfo,clearSelectRows:this.clearSelectRows}))}}]),t}(I.PureComponent),E=S))||E)||E);t.default=T},prrH:function(e,t,a){e.exports={tableList:"web\\pages\\-personnel\\-personnel-tableList",tableListOperator:"web\\pages\\-personnel\\-personnel-tableListOperator",tableListForm:"web\\pages\\-personnel\\-personnel-tableListForm",submitButtons:"web\\pages\\-personnel\\-personnel-submitButtons"}}}]);