(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[48],{UNa5:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n=l(a("bx4M")),r=l(a("p0pE"));a("qVdP");var u=l(a("jsC+"));a("lUTK");var d=l(a("BvKs"));a("+L6B");var c=l(a("2/Rp"));a("14J3");var i=l(a("BMrR"));a("jCWc");var o=l(a("kPKH")),f=l(a("jehZ"));a("5NDa");var s=l(a("5rEg"));a("OaEy");var m=l(a("2fM7"));a("iQDF");var p=l(a("+eQT"));a("2qtc");var E=l(a("kLXV")),v=l(a("2Taf")),h=l(a("vZ4D")),g=l(a("l4Ni")),b=l(a("ujKo")),y=l(a("rlhR")),_=l(a("MhPg"));a("y8nQ");var C,k,I,F,S=l(a("Vl3Y")),D=l(a("q1tI")),x=l(a("LeT2")),O=l(a("jcFm")),w=a("MuoO"),R=a("+n12"),T=l(a("2c58")),M=l(a("0qph")),L=l(a("XZXw")),j=l(a("sEX6")),V=l(a("v5jF")),q=(C=S.default.create(),k=(0,w.connect)(function(e){return{noticeRelease:e.noticeRelease,loading:e.loading.models.noticeRelease}}),C(I=k((F=function(e){function t(){var e,a;(0,v.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,g.default)(this,(e=(0,b.default)(t)).call.apply(e,[this].concat(n))),a.state={dataForm:!1,dataFormID:"",dataFormType:""},a.onAddClick=function(){a.setState({dataForm:!0,dataFormID:"",dataFormType:"A"})},a.onModalCallback=function(){a.setState({dataForm:!1,dataFormID:""})},a.onItemView=function(e){a.setState({dataForm:!0,dataFormID:e.record_id,dataFormType:"V"})},a.onItemEdit=function(e){a.setState({dataForm:!0,dataFormID:e.record_id,dataFormType:"E"})},a.onTableChange=function(e){a.props.dispatch({type:"noticeRelease/fetch",pagination:{current:e.current,pageSize:e.pageSize}})},a.onSearchFormSubmit=function(e){e&&e.preventDefault();var t=a.props.form.getFieldsValue();t.time&&(t.start_time=t.time[0].unix(),t.end_time=t.time[1].unix()),t.receive_group&&(t.receive_group=t.receive_group.join(",")),t.time="",a.props.dispatch({type:"noticeRelease/fetch",payload:t})},a.onItemDelClick=function(e){E.default.confirm({title:"\u786e\u5b9a\u5220\u9664\u3010".concat(e.notice_title,"\u3011\u5546\u54c1\uff1f"),okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:a.onDelOKClick.bind((0,y.default)(a),e.record_id)})},a.onBtnClearClick=function(){a.props.form.resetFields(),a.props.dispatch({type:"noticeRelease/saveSearch",payload:{}}),a.props.dispatch({type:"noticeRelease/fetch"})},a.handleChange=function(e){"7"===e||"6"===e?a.setState({noticeObject:!0}):a.setState({noticeObject:!1}),"8"===e?a.setState({noticeUser:!0}):a.setState({noticeUser:!1})},a.renderSearchForm=function(){var e={labelCol:{xs:{span:24},sm:{span:12},md:{span:12},lg:{span:8}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:12},lg:{span:8}}},t={sm:24,md:8},l=p.default.RangePicker,n=a.props.form.getFieldDecorator,r=m.default.Option;return D.default.createElement(S.default,null,D.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48}},D.default.createElement(o.default,t,D.default.createElement(O.default,(0,f.default)({},e,{label:"\u901a\u77e5\u6807\u9898"}),n("notice_title",{})(D.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165\u901a\u77e5\u6807\u9898",maxLength:"10"})))),D.default.createElement(o.default,t,D.default.createElement(O.default,(0,f.default)({},e,{label:"\u76ee\u6807\u7fa4\u4f53"}),n("receive_group_type",{initialValue:"0"})(D.default.createElement(m.default,{onChange:a.handleChange},D.default.createElement(r,{value:"0"},"\u5168\u90e8"),D.default.createElement(r,{value:"1"},"\u6240\u6709\u4f01\u4e1a\u7ba1\u7406\u5458"),D.default.createElement(r,{value:"2"},"\u6240\u6709\u7528\u6237"),D.default.createElement(r,{value:"3"},"\u6240\u6709\u6e38\u5ba2"),D.default.createElement(r,{value:"4"},"\u6240\u6709\u672a\u8ba4\u8bc1\u7528\u6237"),D.default.createElement(r,{value:"5"},"\u6240\u6709\u8ba4\u8bc1\u7528\u6237"),D.default.createElement(r,{value:"6"},"\u6307\u5b9a\u4f01\u4e1a\u7ba1\u7406\u5458"),D.default.createElement(r,{value:"7"},"\u6307\u5b9a\u4f01\u4e1a\u5168\u5458"),D.default.createElement(r,{value:"8"},"\u6307\u5b9a\u7528\u6237"))))),a.state.noticeObject&&D.default.createElement(o.default,t,D.default.createElement(S.default.Item,(0,f.default)({},e,{label:"\u901a\u77e5\u5bf9\u8c61"}),n("receive_group",{})(D.default.createElement(M.default,{mode:"multiple"})))),a.state.noticeUser&&D.default.createElement(o.default,t,D.default.createElement(S.default.Item,(0,f.default)({},e,{label:"\u901a\u77e5\u5bf9\u8c61"}),n("receive_group",{})(D.default.createElement(T.default,{mode:"multiple"}))))),D.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48}},D.default.createElement(o.default,t,D.default.createElement(O.default,(0,f.default)({},e,{label:"\u901a\u77e5\u5185\u5bb9"}),n("notice_content",{})(D.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165\u901a\u77e5\u5185\u5bb9",maxLength:"10"})))),D.default.createElement(o.default,t,D.default.createElement(S.default.Item,{label:"\u521b\u5efa\u65f6\u95f4"},n("time")(D.default.createElement(l,null)))),D.default.createElement(o.default,t,D.default.createElement(O.default,(0,f.default)({},e,{label:"\u72b6\u6001"}),n("status",{initialValue:0})(D.default.createElement(m.default,null,D.default.createElement(r,{value:0},"\u5168\u90e8"),D.default.createElement(r,{value:1},"\u7f16\u8f91\u4e2d"),D.default.createElement(r,{value:2},"\u5df2\u53d1\u9001")))))),D.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48}},D.default.createElement(o.default,(0,f.default)({},t,{offset:19}),D.default.createElement(c.default,{icon:"search",type:"primary",style:{marginLeft:8},onClick:a.onSearchFormSubmit},"\u67e5\u8be2"),D.default.createElement(c.default,{type:"danger",style:{marginLeft:8},onClick:a.onBtnClearClick},"\u6e05\u7a7a"),D.default.createElement("a",{style:{marginLeft:8,fontSize:12},onClick:a.onQueryFormToggleClick}," "))),D.default.createElement(i.default,null,D.default.createElement(c.default,{icon:"plus",type:"primary",onClick:function(){return a.onAddClick()}},"\u65b0\u5efa")))},a.renderModal=function(){if(a.state.dataForm)return D.default.createElement(V.default,{id:a.state.dataFormID,type:a.state.dataFormType,callback:a.onModalCallback})},a}return(0,_.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"noticeRelease/fetch"})}},{key:"onDelOKClick",value:function(e){this.props.dispatch({type:"noticeRelease/del",payload:{id:e}})}},{key:"render",value:function(){var e=this,t=[{dataIndex:"1",fixed:"left",width:100,render:function(t,a){return D.default.createElement(u.default,{placement:"bottomCenter",overlay:D.default.createElement(d.default,null,D.default.createElement(d.default.Item,null,D.default.createElement("a",{onClick:function(){e.onItemView(a)}}," ","\u67e5\u770b"," ")),1===a.status&&D.default.createElement(d.default.Item,null,D.default.createElement("a",{onClick:function(){e.onItemEdit(a)}}," ","\u7f16\u8f91"," ")),D.default.createElement(d.default.Item,null,D.default.createElement("a",{onClick:function(){e.onItemDelClick(a)}}," ","\u5220\u9664"," ")))},D.default.createElement(c.default,null,"\u64cd\u4f5c"))}},{title:"\u901a\u77e5\u6807\u9898",dataIndex:"notice_title"},{title:"\u76ee\u6807\u7fa4\u4f53",dataIndex:"receive_group_type",render:function(e){return 1===e?D.default.createElement("span",null,"\u6240\u6709\u4f01\u4e1a\u7ba1\u7406\u5458"):2===e?D.default.createElement("span",null,"\u6240\u6709\u7528\u6237"):3===e?D.default.createElement("span",null,"\u6240\u6709\u6e38\u5ba2"):4===e?D.default.createElement("span",null,"\u6240\u6709\u672a\u8ba4\u8bc1\u7528\u6237"):5===e?D.default.createElement("span",null,"\u6240\u6709\u8ba4\u8bc1\u7528\u6237"):6===e?D.default.createElement("span",null,"\u6307\u5b9a\u4f01\u4e1a\u7ba1\u7406\u5458"):7===e?D.default.createElement("span",null,"\u6307\u5b9a\u4f01\u4e1a\u5168\u5458"):8===e?D.default.createElement("span",null,"\u6307\u5b9a\u7528\u6237"):void 0}},{title:"\u901a\u77e5\u5bf9\u8c61",dataIndex:"receive_group_name"},{title:"\u901a\u77e5\u5185\u5bb9",dataIndex:"notice_content"},{title:"\u521b\u5efa\u4eba",dataIndex:"creator_name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"created",render:function(e){return D.default.createElement("span",null," ",(0,R.formatTimestamp)(e)," ")}},{title:"\u53d1\u9001\u4eba",dataIndex:"notice_sender_name"},{title:"\u53d1\u9001\u65f6\u95f4",dataIndex:"send_time",render:function(e){return 0===e?D.default.createElement("span",null," - "):D.default.createElement("span",null," ",(0,R.formatTimestamp)(e)," ")}},{title:"\u72b6\u6001",dataIndex:"status",render:function(e){return 1===e?D.default.createElement("span",{style:{color:"rgba(0, 0, 255)"}},"\u7f16\u8f91\u4e2d"):2===e?D.default.createElement("span",{style:{color:"rgba(0, 128, 0)"}},"\u5df2\u53d1\u9001"):void 0}}],a=this.props,l=a.noticeRelease.data,i=l.list,o=l.pagination,f=a.loading,s=(0,r.default)({showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return D.default.createElement("span",null,"\u5171",e,"\u6761")}},o);return D.default.createElement(L.default,{title:"\u901a\u77e5\u53d1\u5e03"},D.default.createElement(n.default,{bordered:!1},D.default.createElement("div",{className:j.default.tableList},D.default.createElement("div",{className:j.default.tableListForm},this.renderSearchForm()),D.default.createElement("div",{className:j.default.tableListOperator}),D.default.createElement("div",null,D.default.createElement(x.default,{scroll:{x:1700},pagination:s,dataSource:i,rowKey:function(e){return e.record_id},columns:t,loading:f,onChange:this.onTableChange})))),this.renderModal())}}]),t}(D.default.PureComponent),I=F))||I)||I);t.default=q},sEX6:function(e,t,a){e.exports={tableList:"web\\pages\\-notice-release\\-notice-release-tableList",tableListOperator:"web\\pages\\-notice-release\\-notice-release-tableListOperator",tableListForm:"web\\pages\\-notice-release\\-notice-release-tableListForm",submitButtons:"web\\pages\\-notice-release\\-notice-release-submitButtons"}},v5jF:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV"));a("14J3");var r=l(a("BMrR"));a("jCWc");var u=l(a("kPKH")),d=l(a("jehZ"));a("5NDa");var c=l(a("5rEg"));a("OaEy");var i=l(a("2fM7"));a("+L6B");var o=l(a("2/Rp")),f=l(a("2Taf")),s=l(a("vZ4D")),m=l(a("l4Ni")),p=l(a("ujKo")),E=l(a("MhPg"));a("y8nQ");var v,h,g,b,y=l(a("Vl3Y")),_=l(a("q1tI")),C=a("MuoO"),k=l(a("2c58")),I=l(a("0qph")),F=a("+n12"),S=(v=y.default.create(),h=(0,C.connect)(function(e){return{noticeRelease:e.noticeRelease}}),v(g=h((b=function(e){function t(){var e,a;(0,f.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,m.default)(this,(e=(0,p.default)(t)).call.apply(e,[this].concat(n))),a.state={noticeObject:!1,noticeUser:!1,fromDisabled:!0},a.onModalCancelClick=function(){a.props.dispatch({type:"noticeRelease/changemodalVisible",payload:!1}),a.props.callback()},a.sendOut=function(e){a.props.form.validateFieldsAndScroll(function(t,l){t||(l.notice_mode=1,l.receive_group_type=parseInt(l.receive_group_type,10),a.props.dispatch({type:"noticeRelease/add",payload:l,val:e,id:a.props.id}),a.props.callback())})},a.handleChange=function(e){7===e||6===e?a.setState({noticeObject:!0}):a.setState({noticeObject:!1}),8===e?a.setState({noticeUser:!0}):a.setState({noticeUser:!1})},a}return(0,E.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.type,l=e.callback;"A"===a?this.setState({fromDisabled:!1}):"V"===a?this.setState({fromDisabled:!0}):this.setState({fromDisabled:!1}),this.props.dispatch({type:"noticeRelease/loadForm",payload:{id:t,type:a,callback:l}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.noticeRelease,l=a.modalVisible,f=a.modalTitle,s=a.formData,m=t.form.getFieldDecorator,p=this.props.type,E=[];E="A"===p?[_.default.createElement(o.default,{key:"addClose",onClick:this.onModalCancelClick},"\u5173\u95ed"," "),_.default.createElement(o.default,{key:"addSendOut",type:"primary",onClick:function(){return e.sendOut("add")}},"\u53d1\u9001"),_.default.createElement(o.default,{key:"editDeposit",type:"primary",onClick:function(){return e.sendOut("temporaryStorage_create")}},"\u6682\u5b58")]:"V"===p?[_.default.createElement(o.default,{key:"viewClose",onClick:this.onModalCancelClick},"\u5173\u95ed"," ")]:[_.default.createElement(o.default,{key:"editClose",onClick:this.onModalCancelClick},"\u5173\u95ed"," "),_.default.createElement(o.default,{key:"editSendOut",type:"primary",onClick:function(){return e.sendOut("send")}},"\u53d1\u9001"),_.default.createElement(o.default,{key:"editDeposit",type:"primary",onClick:function(){return e.sendOut("temporaryStorage")}},"\u6682\u5b58")];var v={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},h=i.default.Option,g=c.default.TextArea;return _.default.createElement(n.default,{visible:l,title:f,width:600,footer:E,onCancel:this.onModalCancelClick},_.default.createElement(y.default,null,_.default.createElement(r.default,null,_.default.createElement(u.default,{md:24,sm:24},_.default.createElement(y.default.Item,(0,d.default)({},v,{label:"\u6807\u9898"}),m("notice_title",{initialValue:s.notice_title?s.notice_title:"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}]})(_.default.createElement(c.default,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",disabled:this.state.fromDisabled}))))),_.default.createElement(r.default,null,_.default.createElement(u.default,{md:24,sm:24},_.default.createElement(y.default.Item,(0,d.default)({},v,{label:"\u76ee\u6807\u7fa4\u4f53"}),m("receive_group_type",{initialValue:s.receive_group_type?s.receive_group_type:"",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u76ee\u6807\u7fa4\u4f53"}]})(_.default.createElement(i.default,{disabled:this.state.fromDisabled,showSearch:!0,placeholder:"\u8bf7\u9009\u62e9\u76ee\u6807\u7fa4\u4f53",optionFilterProp:"children",onChange:this.handleChange,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},_.default.createElement(h,{value:1},"\u6240\u6709\u4f01\u4e1a\u7ba1\u7406\u5458"),_.default.createElement(h,{value:2},"\u6240\u6709\u7528\u6237"),_.default.createElement(h,{value:3},"\u6240\u6709\u6e38\u5ba2"),_.default.createElement(h,{value:4},"\u6240\u6709\u672a\u8ba4\u8bc1\u7528\u6237"),_.default.createElement(h,{value:5},"\u6240\u6709\u8ba4\u8bc1\u7528\u6237"),_.default.createElement(h,{value:6},"\u6307\u5b9a\u4f01\u4e1a\u7ba1\u7406\u5458"),_.default.createElement(h,{value:7},"\u6307\u5b9a\u4f01\u4e1a\u5168\u5458"),_.default.createElement(h,{value:8},"\u6307\u5b9a\u7528\u6237")))))),this.state.noticeObject||7===s.receive_group_type||6===s.receive_group_type?_.default.createElement(r.default,null,_.default.createElement(u.default,{md:24,sm:24},_.default.createElement(y.default.Item,(0,d.default)({},v,{label:"\u901a\u77e5\u5bf9\u8c61"}),m("receive_group",{initialValue:s.receive_group?s.receive_group:[],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u901a\u77e5\u5bf9\u8c61"}]})(_.default.createElement(I.default,{mode:"multiple",disabled:this.state.fromDisabled}))))):null,this.state.noticeUser||8===s.receive_group_type?_.default.createElement(r.default,null,_.default.createElement(u.default,{md:24,sm:24},_.default.createElement(y.default.Item,(0,d.default)({},v,{label:"\u901a\u77e5\u5bf9\u8c61"}),m("receive_group",{initialValue:s.receive_group?s.receive_group:[],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u901a\u77e5\u5bf9\u8c61"}]})(_.default.createElement(k.default,{mode:"multiple",disabled:this.state.fromDisabled,type:"get"}))))):null,_.default.createElement(r.default,null,_.default.createElement(u.default,{md:24,sm:24},_.default.createElement(y.default.Item,(0,d.default)({},v,{label:"\u901a\u77e5\u5185\u5bb9"}),m("notice_content",{initialValue:s.notice_content?s.notice_content:"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u901a\u77e5\u5185\u5bb9"}]})(_.default.createElement(g,{placeholder:"\u8bf7\u8f93\u5165\u901a\u77e5\u5185\u5bb9",autosize:{minRows:2,maxRows:6},disabled:this.state.fromDisabled}))))),"A"!==p&&_.default.createElement("div",null,_.default.createElement(r.default,null,_.default.createElement(u.default,{md:24,sm:24},_.default.createElement(y.default.Item,(0,d.default)({},v,{label:"\u521b\u5efa\u4eba"}),_.default.createElement("span",null,s.creator_name)))),_.default.createElement(r.default,null,_.default.createElement(u.default,{md:24,sm:24},_.default.createElement(y.default.Item,(0,d.default)({},v,{label:"\u521b\u5efa\u65f6\u95f4"}),_.default.createElement("span",null,(0,F.formatTimestamp)(s.created)," ")))),2===s.status&&_.default.createElement(r.default,null,_.default.createElement(u.default,{md:24,sm:24},_.default.createElement(y.default.Item,(0,d.default)({},v,{label:"\u53d1\u9001\u4eba"}),_.default.createElement("span",null,s.notice_sender_name)))),2===s.status&&_.default.createElement(r.default,null,_.default.createElement(u.default,{md:24,sm:24},_.default.createElement(y.default.Item,(0,d.default)({},v,{label:"\u53d1\u9001\u65f6\u95f4"}),_.default.createElement("span",null,(0,F.formatTimestamp)(s.send_time)," ")))),_.default.createElement(r.default,null,_.default.createElement(u.default,{md:24,sm:24},_.default.createElement(y.default.Item,(0,d.default)({},v,{label:"\u72b6\u6001"}),1===s.status&&_.default.createElement("span",null,"\u7f16\u8f91\u4e2d"),2===s.status&&_.default.createElement("span",null,"\u5df2\u53d1\u9001")))))))}}]),t}(_.default.PureComponent),g=b))||g)||g);t.default=S}}]);