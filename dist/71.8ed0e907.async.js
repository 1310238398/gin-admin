(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[71],{mEWC:function(t,e,a){"use strict";var n=a("g09b"),o=a("tAuX");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("IzEo");var r=n(a("bx4M")),d=n(a("p0pE")),i=n(a("jehZ")),c=n(a("2Taf")),l=n(a("vZ4D")),u=n(a("l4Ni")),f=n(a("ujKo")),s=n(a("MhPg"));a("y8nQ");var p,h,m,I,g=n(a("Vl3Y")),b=o(a("q1tI")),w=a("MuoO"),y=n(a("XZXw")),k=a("+n12"),C=a("hyxQ"),v=a("e2PP"),D=a("riZX"),S=n(a("F6yL")),E=a("4QLA"),M=(p=(0,w.connect)(function(t){return{infoManage:t.infoManage,loading:t.loading.models.infoManage}}),h=g.default.create(),p(m=h((I=function(t){function e(){var t,a;(0,c.default)(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=(0,u.default)(this,(t=(0,f.default)(e)).call.apply(t,[this].concat(o))),a.state={dataForm:!1,dataInfo:!1,dataInfoID:"",dataType:""},a.searchObj={status:[0,2,5]},a.onItemViewClick=function(t){a.setState({dataInfo:!0,dataInfoID:t})},a.onTableChange=function(t){a.props.dispatch({type:"infoManage/fetch",pagination:{current:t.current,pageSize:t.pageSize}})},a.onSearch=function(t){a.props.dispatch({type:"infoManage/fetch",payload:t})},a.onDataFormCallback=function(t){t&&a.props.dispatch({type:"infoManage/fetch"}),a.closeKindeBack()},a.closeKindeBack=function(){a.setState({dataForm:!1,dataFormID:"",dataType:""})},a.onAddClick=function(){a.setState({dataForm:!0,dataFormID:""})},a.onItemDesc=function(t,e){a.setState({dataForm:!0,dataFormID:e.info_id,dataType:e.desc.kind})},a.onDataInfoCallback=function(t){"ok"===t&&a.props.dispatch({type:"infoManage/fetch"}),a.setState({dataInfo:!1,dataInfoID:""})},a.onTableCallback=function(t){"ok"===t&&a.props.dispatch({type:"infoManage/fetch"})},a.renderDataInfo=function(){if(a.state.dataInfo)return b.default.createElement(v.InfoCard,{id:a.state.dataInfoID,callback:a.onDataInfoCallback,visible:!0})},a.renderNewButton=function(){var t={callback:a.onDataFormCallback};a.state.dataForm&&(t.id=a.state.dataFormID,t.datatype=a.state.dataType);var e={visible:a.state.dataForm,edit:t};return b.default.createElement(v.NewButton,(0,i.default)({},e,{mode:"button"}))},a}return(0,s.default)(e,t),(0,l.default)(e,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"infoManage/saveSearch",payload:{}}),this.props.dispatch({type:"infoManage/fetch",payload:this.searchObj})}},{key:"render",value:function(){var t=this,e=this.props,a=e.loading,n=e.infoManage.data,o=n.list,i=n.pagination,c=[{title:"\u72b6\u6001",dataIndex:"status.status",width:120,render:function(t){return b.default.createElement(v.InfoStatus,{code:t})}},{title:"\u6240\u5c5e\u680f\u76ee",dataIndex:"desc.column_id",width:200,render:function(t){return b.default.createElement(D.ColumnShow,{value:t})}},{title:"\u6807\u9898",dataIndex:"desc.title",width:350,render:function(t){return b.default.createElement(C.ContentShow,{content:t})}},{title:"\u6240\u5c5e\u7ec4\u7ec7",dataIndex:"desc.org",width:200,render:function(t){return b.default.createElement(E.OrgShow,{value:t})}},{title:"\u6240\u5c5e\u4e2a\u4eba",dataIndex:"desc.owner",width:100,render:function(t){return b.default.createElement(S.default,{uid:t})}},{title:"\u521b\u5efa\u7528\u6237",dataIndex:"operator.creator",width:100,render:function(t){return b.default.createElement(S.default,{uid:t})}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"operator.cre_time",width:200,render:function(t){return b.default.createElement("span",null," ",(0,k.parseUtcTime)(t)," ")}}],l=(0,d.default)({},i),u={title:function(){return t.renderNewButton()},loading:a,rowKey:function(t){return t.info_id},dataSource:o,columns:c,pagination:l,onChange:this.onTableChange,scroll:{x:1500},onRow:function(e){return{onClick:function(){t.onItemViewClick(e.info_id)}}}};return b.default.createElement(y.default,{title:"\u4fe1\u606f\u7ba1\u7406"},b.default.createElement(r.default,{bordered:!1},b.default.createElement(v.InfoSearch,{onSearch:this.onSearch,searchObj:this.searchObj}),b.default.createElement(v.InfoTableList,{tableProps:u,onCallBack:function(e){return t.onTableCallback(e)},infoOps:{edit:{handler:function(e){t.onItemDesc(e.infoid,e)}}}})),this.renderDataInfo())}}]),e}(b.PureComponent),m=I))||m)||m);e.default=M}}]);