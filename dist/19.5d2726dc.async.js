(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"5O70":function(e,t,i){"use strict";var a=i("tAuX"),l=i("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("g9YV");var n=l(i("wCAj")),d=l(i("p0pE")),o=l(i("2Taf")),r=l(i("vZ4D")),u=l(i("l4Ni")),s=l(i("ujKo")),c=l(i("MhPg")),f=a(i("q1tI")),m=i("6LfW"),p=l(i("rZaG")),g=l(i("KIPd")),v=function(e){function t(){var e,i;(0,o.default)(this,t);for(var a=arguments.length,l=new Array(a),n=0;n<a;n++)l[n]=arguments[n];return i=(0,u.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(l))),i.state={selectedRowKeys:[],selectedRows:[],dataFormType:""},i.handleTableSelectRow=function(e,t){i.setState({selectedRowKeys:e,selectedRows:t})},i.columns=function(){return[{title:"\u4e09\u65b9\u7cfb\u7edf",dataIndex:"name",width:100},{title:"\u5382\u5546",dataIndex:"vendor",width:100,render:function(e){return f.default.createElement(m.DicShow,{pcode:"OPER$#device_monitor_vendor",code:[e],show:function(e){return e}})}}]},i.onAddClick=function(){var e=i.props.onAddClick;i.setState({selectedRowKeys:[],selectedRows:[],dataFormType:"A"},function(){e()})},i}return(0,c.default)(t,e),(0,r.default)(t,[{key:"componentWillReceiveProps",value:function(e){return e.list!==this.props.list&&this.setState({selectedRowKeys:[],selectedRows:[]}),!0}},{key:"render",value:function(){var e=this,t=this.state,i=t.selectedRowKeys,a=t.selectedRows,l=this.props,o=l.pagination,r=l.list,u=l.loading,s=l.onItemEditClick,c=l.onItemMigrationClick,m=l.onTableChange,v=(0,d.default)({showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return f.default.createElement("span",null,"\u5171",e,"\u6761")}},o);return f.default.createElement("div",{className:g.default.VideoThirdSystemList},f.default.createElement("div",{className:g.default.buttons},f.default.createElement(p.default,{icon:"plus",key:"add",code:"add",type:"primary",onClick:function(){e.onAddClick()}},"\u65b0\u589e"),1===a.length&&[f.default.createElement(p.default,{key:"edit",code:"edit",icon:"edit",onClick:function(){return s(a[0])}},"\u7f16\u8f91"),f.default.createElement(p.default,{key:"del",code:"del",icon:"delete",type:"danger",onClick:function(){return c(a[0])}},"\u5220\u9664")]),f.default.createElement(n.default,{rowSelection:{selectedRowKeys:i,onChange:this.handleTableSelectRow},loading:u,rowKey:function(e){return e.record_id},dataSource:r,columns:this.columns(),pagination:v,onChange:m}))}}]),t}(f.PureComponent);t.default=v},CsYc:function(e,t,i){"use strict";var a=i("g09b"),l=i("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("2qtc");var n=a(i("kLXV"));i("IzEo");var d=a(i("bx4M"));i("14J3");var o=a(i("BMrR"));i("jCWc");var r=a(i("kPKH")),u=a(i("jehZ")),s=a(i("p0pE")),c=a(i("2Taf")),f=a(i("vZ4D")),m=a(i("l4Ni")),p=a(i("ujKo")),g=a(i("MhPg"));i("y8nQ");var v=a(i("Vl3Y"));i("5NDa");var h,y,b,E=a(i("5rEg")),C=l(i("q1tI")),k=i("6LfW"),w=a(i("FNzI")),S=a(i("9fBf")),T=E.default.TextArea,x=(h=v.default.create(),h((b=function(e){function t(e){var i;(0,c.default)(this,t),i=(0,m.default)(this,(0,p.default)(t).call(this,e)),i.dateFormat="YYYY-MM-DDTHH:mm:ssZ",i.onModalOKClick=function(){var e=i.props,t=(e.selectBuilding,e.editDevice),a=e.onSaved;i.props.form.validateFieldsAndScroll(function(e,i){if(!e)if(t){var l=(0,s.default)({},t,{name:i.name,vendor:i.vendor,memo:i.memo,extra:i.extra});S.default.update(l).then(function(){a(l)})}else{var n={name:i.name,vendor:i.vendor,memo:i.memo,extra:i.extra};S.default.create(n).then(function(){a()})}})},i.onModalCancelClick=function(){var e=i.props.onClose;e()};var a=e.editDevice;return i.state={formData:a||{}},i}return(0,g.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.state.formData,t=this.props,i=t.form.getFieldDecorator,a=t.editVisible,l=t.editDevice,s={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}},c={sm:24,md:24};return C.default.createElement(n.default,{title:l?"\u7f16\u8f91\u89c6\u9891\u5382\u5546":"\u65b0\u589e\u89c6\u9891\u5382\u5546",width:600,visible:a,okText:"\u4fdd\u5b58",cancelText:"\u5173\u95ed",onOk:this.onModalOKClick,onCancel:this.onModalCancelClick},C.default.createElement(d.default,{bordered:!1,className:w.default.gate},C.default.createElement(v.default,null,C.default.createElement(o.default,{span:24},C.default.createElement(r.default,c,C.default.createElement(v.default.Item,(0,u.default)({},s,{label:"\u7cfb\u7edf\u540d\u79f0"}),i("name",{initialValue:e.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}]})(C.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165"})))),C.default.createElement(r.default,c,C.default.createElement(v.default.Item,(0,u.default)({},s,{label:"\u5382\u5546"}),i("vendor",{initialValue:e.vendor,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5382\u5546\u6807\u8bc6"}]})(C.default.createElement(k.DicSelect,{vmode:"string",pcode:"OPER$#device_monitor_vendor",selectProps:{placeholder:"\u8bf7\u9009\u62e9"}})))),C.default.createElement(r.default,c,C.default.createElement(v.default.Item,(0,u.default)({},s,{label:"\u8fde\u63a5\u53c2\u6570"}),i("extra",{initialValue:e.extra,rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}]})(C.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165"})))),C.default.createElement(r.default,c,C.default.createElement(v.default.Item,(0,u.default)({},s,{label:"\u5907\u6ce8"}),i("memo",{initialValue:e.memo||"",rules:[{required:!1,message:"\u5907\u6ce8"}]})(C.default.createElement(T,{rows:4}))))))))}}]),t}(C.PureComponent),y=b))||y);t.default=x},D9qz:function(e,t,i){"use strict";var a=i("g09b"),l=i("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("IzEo");var n=a(i("bx4M"));i("/xke");var d=a(i("TeRw"));i("2qtc");var o=a(i("kLXV")),r=a(i("p0pE")),u=a(i("2Taf")),s=a(i("vZ4D")),c=a(i("l4Ni")),f=a(i("ujKo")),m=a(i("MhPg"));i("y8nQ");var p,g,v,h,y=a(i("Vl3Y")),b=l(i("q1tI")),E=i("MuoO"),C=a(i("5O70")),k=a(i("CsYc")),w=a(i("vq/5")),S=a(i("XZXw")),T=a(i("9fBf")),x=(p=(0,E.connect)(function(e){return{videoEquipmentThird:e.videoEquipmentThird}}),g=y.default.create(),p(v=g((h=function(e){function t(){var e,i;(0,u.default)(this,t);for(var a=arguments.length,l=new Array(a),n=0;n<a;n++)l[n]=arguments[n];return i=(0,c.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(l))),i.state={selectBuilding:null,selectBuildingPath:null,loading:!0,editVisible:!1,editDevice:null,data:{list:[],pagination:{}},formType:""},i.pageSize=10,i.current=1,i.getList=function(e,t){i.setState({loading:!0});var a=i.props.form.getFieldsValue(),l=(0,r.default)({q:"page",pageSize:t,current:e},a);null!==i.state.selectBuilding&&(l.buildingID=i.state.selectBuilding.key),T.default.query(l).then(function(e){i.setState({loading:!1,data:e})})},i.onAddClick=function(){i.setState({editDevice:null,editVisible:!0,formType:"A"})},i.onItemEditClick=function(e){i.setState({editDevice:(0,r.default)({},e),editVisible:!0,formType:"E"})},i.onItemMigrationClick=function(e){o.default.confirm({title:"\u786e\u5b9a\u5220\u9664\u89c6\u9891\u5382\u5546\u3010".concat(e.name,"\u3011\uff1f"),okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){T.default.del(e).then(function(){d.default.success({key:"deleteDevice",message:"\u89c6\u9891\u5382\u5546\u5220\u9664\u6210\u529f",description:"\u89c6\u9891\u5382\u5546\u3010".concat(e.name,"\u3011\u5df2\u7ecf\u5220\u9664!")}),i.getList(i.current,i.pageSize)})}})},i.onClose=function(){i.setState({editVisible:!1},function(){i.getList(i.current,i.pageSize)})},i.onSaved=function(e){e?i.setState({editVisible:!1,editDevice:(0,r.default)({},e)},function(){i.getList(i.current,i.pageSize)}):i.setState({editVisible:!1,editDevice:null},function(){i.getList(i.current,i.pageSize)})},i.onResetFormClick=function(){i.props.form.resetFields(),i.getList(i.current,i.pageSize)},i.onTableChange=function(e){i.props.dispatch({type:"videoEquipmentThird/fetch",pagination:{current:e.current,pageSize:e.pageSize}}),i.getList(e.current,e.pageSize)},i}return(0,m.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){this.getList(this.current,this.pageSize)}},{key:"render",value:function(){var e=this.state,t=e.selectBuilding,i=e.selectBuildingPath,a=e.editVisible,l=e.editDevice,d=e.data,o=d.list,r=d.pagination,u=e.loading,s=e.formType;return b.default.createElement(S.default,{title:"\u89c6\u9891\u5382\u5546\u7cfb\u7edf\u7ba1\u7406"},b.default.createElement(n.default,{className:w.default.gate},b.default.createElement("table",null,b.default.createElement("tbody",null,b.default.createElement("tr",null,b.default.createElement("td",{className:w.default.right},b.default.createElement(C.default,{selectBuilding:t,list:o,pagination:r,loading:u,onTableChange:this.onTableChange,onAddClick:this.onAddClick,onItemEditClick:this.onItemEditClick,onItemMigrationClick:this.onItemMigrationClick})))))),a?b.default.createElement(k.default,{editVisible:a,editDevice:l,selectBuilding:t,selectBuildingPath:i,onClose:this.onClose,onSaved:this.onSaved,type:s}):null)}}]),t}(b.PureComponent),v=h))||v)||v);t.default=x},FNzI:function(e,t,i){e.exports={gate:"web\\pages\\-building\\-device\\-video-third-system\\-video-third-system-edit-gate",left:"web\\pages\\-building\\-device\\-video-third-system\\-video-third-system-edit-left",right:"web\\pages\\-building\\-device\\-video-third-system\\-video-third-system-edit-right"}},KIPd:function(e,t,i){e.exports={VideoThirdSystemList:"web\\pages\\-building\\-device\\-video-third-system\\-video-third-system-list-VideoThirdSystemList",buttons:"web\\pages\\-building\\-device\\-video-third-system\\-video-third-system-list-buttons"}},"vq/5":function(e,t,i){e.exports={gate:"web\\pages\\-building\\-device\\-video-third-system\\index-gate",left:"web\\pages\\-building\\-device\\-video-third-system\\index-left",right:"web\\pages\\-building\\-device\\-video-third-system\\index-right"}}}]);