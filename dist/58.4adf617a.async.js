(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[58],{"1Yei":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONST_PARKINGLOT_STATUS=t.CONST_CARPORT_COLUMN=t.CONST_BUILDING_SELL_STATUS=t.CONST_SUBFRAME_MODE=t.CONST_BUILDING_TYPE=void 0;var l={PARK:10,AREA:20,BUILD:30,UNIT:40,FLOOR:50,HOUSE:60};t.CONST_BUILDING_TYPE=l;var n={NEW:1,EDIT:2,VIEW:3};t.CONST_SUBFRAME_MODE=n;var r={DAI_SHOU:1,YI_SHOU:2,DAI_ZU:3,YI_ZU:4,ZI_YONG:5};t.CONST_BUILDING_SELL_STATUS=r;var u={PARK:10,NAME:20,FLOOR:30,AREA:40,TITLE:50};t.CONST_CARPORT_COLUMN=u;var d={ZHAN_YONHG:1,KONG_XIAN:2};t.CONST_PARKINGLOT_STATUS=d},OgHO:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=l(a("bx4M"));a("+L6B");var u=l(a("2/Rp")),d=l(a("p0pE")),i=l(a("2Taf")),o=l(a("vZ4D")),s=l(a("l4Ni")),c=l(a("ujKo")),f=l(a("MhPg"));a("y8nQ");var m,p,g,h,E=l(a("Vl3Y")),x=n(a("q1tI")),I=a("MuoO"),y=l(a("XZXw")),b=a("+n12"),v=l(a("y8/n")),C=l(a("F6yL")),_=a("e2PP"),M=(m=(0,I.connect)(function(e){return{zsxxManage:e.zsxxManage,columnManage:e.columnManage}}),p=E.default.create(),m(g=p((h=function(e){function t(){var e,a;(0,i.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,s.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(n))),a.state={dataForm:!1,dataFormID:"",dataInfo:!1,dataInfoID:""},a.searchObj={status:[0,2,5]},a.onItemViewClick=function(e){a.setState({dataInfo:!0,dataInfoID:e})},a.onTableChange=function(e){a.props.dispatch({type:"zsxxManage/fetch",pagination:{current:e.current,pageSize:e.pageSize}})},a.onSearch=function(e){a.props.dispatch({type:"zsxxManage/fetch",payload:e})},a.onDataFormCallback=function(e){var t=a.props.dispatch;t({type:"zsxxManage/saveFormID",payload:""}),t({type:"zsxxManage/saveFormData",payload:{}}),a.setState({dataForm:!1,dataFormID:""}),e&&"ok"===e&&t({type:"zsxxManage/fetch"})},a.onAddClick=function(){a.setState({dataForm:!0,dataFormID:""})},a.onItemDesc=function(e){a.setState({dataForm:!0,dataFormID:e})},a.onTableCallback=function(e){"ok"===e&&a.props.dispatch({type:"zsxxManage/fetch"})},a.onDataInfoCallback=function(e){"ok"===e&&a.props.dispatch({type:"infoManage/fetch"}),a.setState({dataInfo:!1,dataInfoID:""})},a.renderDataForm=function(){if(a.state.dataForm)return x.default.createElement(v.default,{id:a.state.dataFormID,callback:a.onDataFormCallback})},a.renderDataInfo=function(){if(a.state.dataInfo)return x.default.createElement(_.InfoCard,{id:a.state.dataInfoID,callback:a.onDataInfoCallback,visible:!0})},a}return(0,f.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"zsxxManage/saveSearch",payload:{}}),this.props.dispatch({type:"zsxxManage/fetch",payload:this.searchObj}),this.props.dispatch({type:"columnManage/queryColumnTree"})}},{key:"render",value:function(){var e=this,t=this.props.zsxxManage,a=t.loading,l=t.data,n=l.list,i=l.pagination,o=[{title:"\u6807\u9898",dataIndex:"desc.title",width:350},{title:"\u6240\u5c5e\u680f\u76ee",dataIndex:"desc.column_name",width:200},{title:"\u72b6\u6001",dataIndex:"status.status",width:100,render:function(e){return x.default.createElement(_.InfoStatus,{code:e})}},{title:"\u521b\u5efa\u7528\u6237",dataIndex:"operator.creator",width:100,render:function(e){return x.default.createElement(C.default,{uid:e})}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"operator.cre_time",render:function(e){return x.default.createElement("span",null," ",(0,b.parseUtcTime)(e)," ")}}],s=(0,d.default)({},i),c={title:function(){return x.default.createElement("div",null,x.default.createElement(u.default,{icon:"plus",type:"primary",onClick:function(){return e.onAddClick()}},"\u65b0\u5efa"))},loading:a,rowKey:function(e){return e.info_id},dataSource:n,columns:o,pagination:s,onChange:this.onTableChange,scroll:{x:1e3},onRow:function(t){return{onClick:function(){e.onItemViewClick(t.info_id)}}}};return x.default.createElement(y.default,{title:"\u62db\u5546\u4fe1\u606f\u7ba1\u7406"},x.default.createElement(r.default,{bordered:!1},x.default.createElement(_.InfoSearch,{onSearch:this.onSearch,hide:{org:!0},searchObj:this.searchObj}),x.default.createElement(_.InfoTableList,{tableProps:c,onCallBack:function(t){return e.onTableCallback(t)},infoOps:{edit:{handler:function(t){e.onItemDesc(t.info_id,t)}}}})),this.renderDataForm(),this.renderDataInfo())}}]),t}(x.PureComponent),g=h))||g)||g);t.default=M},"y8/n":function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=l(a("kLXV"));a("giR+");var u=l(a("fyUT"));a("14J3");var d=l(a("BMrR"));a("5NDa");var i=l(a("5rEg"));a("jCWc");var o=l(a("kPKH")),s=l(a("jehZ")),c=l(a("p0pE")),f=l(a("2Taf")),m=l(a("vZ4D")),p=l(a("l4Ni")),g=l(a("ujKo")),h=l(a("MhPg"));a("y8nQ");var E=l(a("Vl3Y"));a("OaEy");var x,I,y,b,v=l(a("2fM7")),C=n(a("q1tI")),_=a("MuoO"),M=l(a("xXik")),O=l(a("9DcN")),S=a("e2PP"),T=a("1Yei"),k=a("6LfW"),D=l(a("5zc/")),A=v.default.Option,N=E.default.Item,z={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:14}}},L={labelCol:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},xl:{span:24},xxl:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:24}}},w={xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12},xl:{span:12},xxl:{span:8}},F={xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12},xl:{span:12},xxl:{span:12}},P=(x=(0,_.connect)(function(e){return{columnManage:e.columnManage,zsxxManage:e.zsxxManage}}),I=E.default.create(),x(y=I((b=function(e){function t(e){var a;return(0,f.default)(this,t),a=(0,p.default)(this,(0,g.default)(t).call(this,e)),a.onModalCancelClick=function(){a.props.dispatch({type:"zsxxManage/changeFormVisible",payload:!1}),a.props.callback()},a.onModalOKClick=function(){a.formSubmit()},a.onOrgChange=function(e){a.props.dispatch({type:"columnManage/queryColumnTree",org:e.target.value,column:""})},a.onChangePark=function(e){a.props.dispatch({type:"building/queryBuildings",buildingType:T.CONST_BUILDING_TYPE.AREA,parentId:e})},a.onClomunChange=function(e){e&&a.props.dispatch({type:"zsxxManage/fetchFormExtra",columnId:e})},a.formSubmit=function(){a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var l=(0,c.default)({},t);if(l.tags&&"string"===typeof l.tags?l.tags=l.tags.split(/\s+/):l.tags=[],l.banner&&l.banner.length&&"string"!==typeof l.banner){var n=l.banner[0];n&&(l.banner=n)}else delete l.banner;if(l.icon&&l.icon.length||delete l.icon,4===l.list_mode){if(!l.banner||Array.isArray(l.banner)&&0===l.banner.length)return void a.props.form.setFields({banner:{value:[],errors:[new Error("\u663e\u793a\u65d7\u5e1c\u56fe\u7247\u6a21\u5f0f\u5fc5\u987b\u4e0a\u4f20\u65d7\u5e1c\u56fe\u7247")]}})}else if((2===l.list_mode||3===l.list_mode)&&(!l.icon||Array.isArray(l.icon)&&0===l.icon.length))return void a.props.form.setFields({icon:{value:[],errors:[new Error("\u56fe\u6807\u81f3\u5c11\u4e0a\u4f20\u4e00\u5f20\u56fe\u7247")]}});l.Kind=1,a.props.dispatch({type:"zsxxManage/submitDesc",payload:l})}})},a.showExtra=function(){var e=a.props,t=e.zsxxManage.formData,l=e.form,n=t.ctrl;if(n){var r=t.desc;return n.map(function(e){var t=r&&r.extras&&r.extras[e.code]?r.extras[e.code]:"",a={ctrl:e,value:t,formItemLayout:z,form:l};return C.default.createElement(o.default,(0,s.default)({},w,{key:"extras_".concat(e.code)}),C.default.createElement(S.ExtraInput,a))})}},a.onChangePark=function(e){a.props.dispatch({type:"zsxxManage/queryBuildingList",park_id:e})},a.inputElement=C.default.createRef(),a}return(0,h.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.callback;this.props.dispatch({type:"zsxxManage/loadForm",payload:{id:t,callback:a}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.zsxxManage,l=a.formTitle,n=a.formVisible,c=a.formData,f=a.submitting,m=a.areas,p=t.form.getFieldDecorator,g=c.desc?c.desc:{},h=g&&g.extras?g.extras:{},x={height:200},I=[],y=[],b=g.banner,_=g.icon;return b&&(y=[b]),_&&_.length&&(I=_),C.default.createElement(r.default,{title:l,visible:n,width:"70%",maskClosable:!1,confirmLoading:f,destroyOnClose:!0,onOk:this.onModalOKClick,onCancel:this.onModalCancelClick,style:{top:20},bodyStyle:{maxWidth:1280,height:500,overflowY:"auto"}},C.default.createElement(E.default,null,C.default.createElement(d.default,{gutter:8,type:"flex",justify:"space-between"},C.default.createElement(o.default,w,C.default.createElement(E.default.Item,(0,s.default)({},z,{label:"\u6807\u9898"}),p("title",{initialValue:g.title,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}]})(C.default.createElement(i.default,{placeholder:"\u8bf7\u8f93\u5165",maxLength:100})))),C.default.createElement(o.default,w,C.default.createElement(E.default.Item,(0,s.default)({},z,{label:"\u5217\u8868\u663e\u793a\u6a21\u5f0f"}),p("list_mode",{initialValue:g.list_mode,rules:[{required:!1,message:"\u8bf7\u9009\u62e9\u5217\u8868\u663e\u793a\u6a21\u5f0f"}]})(C.default.createElement(v.default,null,C.default.createElement(A,{value:0},"\u81ea\u52a8"),C.default.createElement(A,{value:1},"\u6587\u672c\u6a21\u5f0f"),C.default.createElement(A,{value:2},"\u5de6\u56fe\u53f3\u6587"),C.default.createElement(A,{value:3},"\u4e0a\u6587\u4e0b\u56fe"),C.default.createElement(A,{value:4},"\u663e\u793a\u65d7\u5e1c\u56fe\u7247")))))),C.default.createElement(d.default,{gutter:8,type:"flex",justify:"space-between"},C.default.createElement(o.default,w,C.default.createElement(E.default.Item,(0,s.default)({},z,{label:"\u56ed\u533a"}),p("extras.yq",{initialValue:h.yq,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u56ed\u533a"}]})(C.default.createElement(D.default,{onChange:this.onChangePark})))),C.default.createElement(o.default,w,C.default.createElement(E.default.Item,(0,s.default)({},z,{label:"\u533a\u57df"}),p("extras.qy",{initialValue:h.qy,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u533a\u57df"}]})(C.default.createElement(v.default,null,m.map(function(e){return C.default.createElement(A,{key:e.record_id,value:e.record_id},e.code)})))))),C.default.createElement(d.default,{gutter:8,type:"flex",justify:"space-between"},C.default.createElement(o.default,w,C.default.createElement(N,(0,s.default)({},z,{label:"\u5206\u7c7b"}),p("extras.fl",{initialValue:h.fl,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b"}]})(C.default.createElement(k.DicSelect,{pcode:"cms$#zsxx$#fl"})))),C.default.createElement(o.default,w,C.default.createElement(N,(0,s.default)({},z,{label:"\u79df\u552e\u65b9\u5f0f"}),p("extras.zsfs",{initialValue:h.zsfs,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u79df\u552e\u65b9\u5f0f"}]})(C.default.createElement(k.DicSelect,{pcode:"cms$#zsxx$#zsfs"})))),C.default.createElement(o.default,w,C.default.createElement(E.default.Item,(0,s.default)({},z,{label:"\u9762\u79ef"}),p("extras.mj",{initialValue:h.mj,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9762\u79ef"}]})(C.default.createElement(u.default,{maxLength:12})),C.default.createElement("span",null,"\u5e73\u65b9\u7c73(m",C.default.createElement("sup",null,"2"),")"))),C.default.createElement(o.default,w,C.default.createElement(E.default.Item,(0,s.default)({},z,{label:"\u5730\u5740"}),p("extras.dz",{initialValue:h.dz,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5730\u5740"}]})(C.default.createElement(i.default,{maxLength:200}))))),C.default.createElement(d.default,{gutter:8,type:"flex",justify:"space-between"},C.default.createElement(o.default,F,C.default.createElement(E.default.Item,(0,s.default)({},z,{label:"\u56fe\u7247"}),p("icon",{initialValue:I,rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u56fe\u7247"}]})(C.default.createElement(O.default,{accept:"image/*",bucket:"cms",name:"data",num:9,listType:"picture-card",rich:this.inputElement})))),C.default.createElement(o.default,F,C.default.createElement(E.default.Item,(0,s.default)({},z,{label:"\u65d7\u5e1c"}),p("banner",{initialValue:y,rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u65d7\u5e1c"}]})(C.default.createElement(O.default,{bucket:"cms",name:"data",num:1,listType:"picture"})))),C.default.createElement(o.default,F,C.default.createElement(E.default.Item,(0,s.default)({},z,{label:"\u89c6\u9891"}),p("extras.sp",{initialValue:h.sp,rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u89c6\u9891"}]})(C.default.createElement(S.VideoInput,null)))),C.default.createElement(o.default,{span:24},C.default.createElement(E.default.Item,(0,s.default)({},L,{label:"\u7b80\u4ecb"}),p("desc",{initialValue:g.desc,rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u7b80\u4ecb"}]})(C.default.createElement(i.default.TextArea,{placeholder:"\u8bf7\u8f93\u5165",maxLength:500,rows:4})))),C.default.createElement(o.default,{span:24},C.default.createElement(N,(0,s.default)({},L,{label:"\u8be6\u60c5"}),p("content",{required:!0,initialValue:g.content})(C.default.createElement(M.default,{rich:x,ref:function(t){e.inputElement=t}})))))))}}]),t}(C.PureComponent),y=b))||y)||y);t.default=P}}]);