(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"8RBg":function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=l(a("kLXV"));a("g9YV");var o=l(a("wCAj"));a("14J3");var d=l(a("BMrR"));a("jCWc");var u=l(a("kPKH"));a("y8nQ");var i=l(a("Vl3Y"));a("+L6B");var c,f,s,m=l(a("2/Rp")),p=l(a("p0pE")),h=l(a("2Taf")),v=l(a("vZ4D")),y=l(a("l4Ni")),E=l(a("ujKo")),C=l(a("MhPg")),b=n(a("q1tI")),g=a("MuoO"),k=l(a("8xrO")),_=a("+n12"),F=(c=(0,g.connect)(function(e){return{authCode:e.authCode}}),c((s=function(e){function t(){var e,a;(0,h.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,y.default)(this,(e=(0,E.default)(t)).call.apply(e,[this].concat(n))),a.onModalCancelClick=function(){a.props.dispatch({type:"authCode/changeFormVisible",payload:!1}),a.props.callback()},a.onTableChange=function(e){a.props.dispatch({type:"authCode/fetchHistory",payload:{record_id:a.props.id},pagination:{current:e.current,pageSize:e.pageSize}})},a}return(0,C.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.type,l=e.callback,n=e.info;this.props.dispatch({type:"authCode/loadForm",payload:{id:t,type:a,callback:l,info:n}}),this.props.dispatch({type:"authCode/fetchHistory",payload:{record_id:t}})}},{key:"render",value:function(){var e=this.props,t=e.info,a=e.authCode,l=a.formTitle,n=a.formVisible,c=a.formData,f=a.historyLoading,s=a.historyData,h=s.list,v=s.pagination,y=[{title:"\u6635\u79f0",dataIndex:"user.nickname",render:function(e){return b.default.createElement("span",null,e)}},{title:"\u59d3\u540d",dataIndex:"real_name"},{title:"\u6027\u522b",dataIndex:"user.gender",render:function(e){return b.default.createElement("span",null,1===e?"\u7537":"\u5973")}},{title:"\u8054\u7cfb\u7535\u8bdd",dataIndex:"user.phone",render:function(e){return b.default.createElement("span",null,e)}},{title:"\u90e8\u95e8",dataIndex:"dept",render:function(e){return b.default.createElement("span",null,e?e.name:"")}},{title:"\u8ba4\u8bc1\u65f6\u95f4",dataIndex:"created_at",render:function(e){return b.default.createElement("span",null,e?(0,_.formatDate)(e,"YYYY-MM-DD HH:mm:ss"):"")}}],E=(0,p.default)({showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return b.default.createElement("span",null,"\u5171",e,"\u6761")}},v);return b.default.createElement(r.default,{title:l,width:1e3,visible:n,maskClosable:!1,destroyOnClose:!0,footer:b.default.createElement(m.default,{onClick:this.onModalCancelClick},"\u5173\u95ed"),onCancel:this.onModalCancelClick,style:{top:20}},b.default.createElement(i.default,{layout:"inline"},b.default.createElement(d.default,null,b.default.createElement(u.default,{md:24},b.default.createElement(i.default.Item,{label:"\u4f01\u4e1a\u540d\u79f0"},b.default.createElement("span",{className:"ant-form-text"},c.enterprise_name)))),b.default.createElement(d.default,null,b.default.createElement(u.default,{md:8},b.default.createElement(i.default.Item,{label:"\u8ba4\u8bc1\u7801"},b.default.createElement("span",{className:"ant-form-text"},c.code))),b.default.createElement(u.default,{md:8},b.default.createElement(i.default.Item,{label:"\u8ba4\u8bc1\u7801\u7c7b\u578b"},b.default.createElement("span",{className:"ant-form-text"},c.code_type&&b.default.createElement(k.default,{enterpriseID:t.record_id,code:c.code_type})))),b.default.createElement(u.default,{md:8},b.default.createElement(i.default.Item,{label:"\u72b6\u6001"},b.default.createElement("span",{className:"ant-form-text"},1===c.status?"\u6709\u6548":"\u4f5c\u5e9f")))),b.default.createElement(d.default,null,b.default.createElement(u.default,{md:8},b.default.createElement(i.default.Item,{label:"\u751f\u6548\u65b9\u5f0f"},b.default.createElement("span",{className:"ant-form-text"},1===c.effective_mode?"\u65f6\u95f4":"\u6b21\u6570"))),b.default.createElement(u.default,{md:16},1===c.effective_mode&&b.default.createElement(i.default.Item,{label:"\u6709\u6548\u671f"},b.default.createElement("span",{className:"ant-form-text"},(0,_.formatDate)(c.effective_start,"YYYY/MM/DD")," ~"," ",(0,_.formatDate)(c.effective_end,"YYYY/MM/DD"))),2===c.effective_mode&&b.default.createElement(i.default.Item,{label:"\u5269\u4f59\u6b21\u6570/\u603b\u6b21\u6570"},b.default.createElement("span",{className:"ant-form-text"},c.effective_number-c.used_number," / ",c.effective_number))))),b.default.createElement("div",{style:{height:1,width:"100%",background:"#F0F0F0",marginTop:10,marginBottom:20}}),b.default.createElement(o.default,{loading:f,rowKey:function(e){return e.id},dataSource:h,columns:y,pagination:E,onChange:this.onTableChange}))}}]),t}(b.PureComponent),f=s))||f);t.default=F},"8xrO":function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("2Taf")),o=n(a("vZ4D")),d=n(a("l4Ni")),u=n(a("ujKo")),i=n(a("MhPg")),c=l(a("q1tI")),f=a("e9aR"),s=function(e){function t(e){var a;return(0,r.default)(this,t),a=(0,d.default)(this,(0,u.default)(t).call(this,e)),a.findAndGetValue=function(e,t){for(var a=0;a<e.length;a+=1)if(e[a].code===t)return e[a].name;return""},a.state={value:""},a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.enterpriseID,l=t.code,n="".concat(a,"_usertypes"),r=sessionStorage.getItem(n);if(r&&""!==r){var o=JSON.parse(r);this.setState({value:this.findAndGetValue(o,l)})}else(0,f.queryEnterpriseUserType)({record_id:a}).then(function(t){var a=t.list||[];sessionStorage.setItem(n,JSON.stringify(a)),e.setState({value:e.findAndGetValue(a,l)})})}},{key:"render",value:function(){var e=this.state.value;return c.default.createElement("span",null,e)}}]),t}(c.PureComponent);t.default=s},I6gW:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=n(a("kLXV"));a("fOrg");var o=n(a("+KLJ"));a("14J3");var d=n(a("BMrR"));a("+L6B");var u=n(a("2/Rp")),i=n(a("2Taf")),c=n(a("vZ4D")),f=n(a("l4Ni")),s=n(a("ujKo")),m=n(a("MhPg")),p=l(a("q1tI")),h=function(e){function t(e){var a;return(0,i.default)(this,t),a=(0,f.default)(this,(0,s.default)(t).call(this,e)),a.onModalCancelClick=function(){a.setState({visible:!1}),a.props.callback()},a.state={value:e.value,visible:!0},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return p.default.createElement(r.default,{title:"\u4f01\u4e1a\u8ba4\u8bc1\u7801",width:600,visible:this.state.visible,maskClosable:!1,destroyOnClose:!0,footer:p.default.createElement(u.default,{type:"primary",onClick:this.onModalCancelClick},"\u786e\u5b9a"),onCancel:this.onModalCancelClick,style:{top:20}},p.default.createElement(d.default,{style:{marginTop:50,marginBottom:10,textAlign:"center"}},p.default.createElement("span",{style:{fontSize:20}},"\u5df2\u4e3a\u60a8\u6210\u529f\u751f\u6210\u8ba4\u8bc1\u7801\uff1a")),p.default.createElement(d.default,null,p.default.createElement(o.default,{showIcon:!1,type:"success",style:{textAlign:"center"},message:p.default.createElement("span",{style:{fontSize:56}},this.state.value)})),p.default.createElement(d.default,{style:{marginTop:10,marginBottom:50,textAlign:"center"}},p.default.createElement("span",{style:{color:"#A9A9A9",fontSize:16}},"\u8bf7\u590d\u5236\u4e0a\u9762\u7684\u8ba4\u8bc1\u7801\u53d1\u9001\u7ed9\u60a8\u7684\u5458\u5de5\u5b8c\u6210\u5458\u5de5\u8ba4\u8bc1")))}}]),t}(p.PureComponent);t.default=h},Kisz:function(e,t,a){e.exports={tableList:"web\\pages\\-enterprise\\-auth-code\\-auth-code-list-tableList",tableListOperator:"web\\pages\\-enterprise\\-auth-code\\-auth-code-list-tableListOperator",tableListForm:"web\\pages\\-enterprise\\-auth-code\\-auth-code-list-tableListForm",submitButtons:"web\\pages\\-enterprise\\-auth-code\\-auth-code-list-submitButtons"}},gvfe:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var r=l(a("wCAj"));a("IzEo");var o=l(a("bx4M"));a("fOrg");var d=l(a("+KLJ")),u=l(a("p0pE"));a("Awhp");var i=l(a("KrTs"));a("14J3");var c=l(a("BMrR"));a("+L6B");var f=l(a("2/Rp"));a("jCWc");var s=l(a("kPKH"));a("5NDa");var m=l(a("5rEg"));a("2qtc");var p=l(a("kLXV")),h=l(a("2Taf")),v=l(a("vZ4D")),y=l(a("l4Ni")),E=l(a("ujKo")),C=l(a("rlhR")),b=l(a("MhPg"));a("y8nQ");var g,k,_,F,I=l(a("Vl3Y")),D=n(a("q1tI")),w=a("MuoO"),M=l(a("XZXw")),x=l(a("vp8p")),S=l(a("pnMX")),T=l(a("I6gW")),Y=l(a("8RBg")),O=l(a("owGW")),V=l(a("8xrO")),A=a("+n12"),N=l(a("Kisz")),R=(g=(0,w.connect)(function(e){return{authCode:e.authCode}}),k=I.default.create(),g(_=k((F=function(e){function t(){var e,a;(0,h.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,y.default)(this,(e=(0,E.default)(t)).call.apply(e,[this].concat(n))),a.state={dataForm:!1,dataFormID:"",selectedRows:[],selectedRowsCon:[],dataFormType:"",codeForm:!1,codeFormValue:"",viewForm:!1,historyForm:!1},a.onItemDisableOKClick=function(e){a.props.dispatch({type:"authCode/changeStatus",payload:{record_id:e,status:2}})},a.onItemDisableClick=function(e){p.default.confirm({title:"\u786e\u5b9a\u4f5c\u5e9f\u8ba4\u8bc1\u7801\u3010".concat(e.code,"\u3011\uff1f"),okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:a.onItemDisableOKClick.bind((0,C.default)(a),e.record_id)})},a.onItemListClick=function(e){a.setState({historyForm:!0,dataFormID:e,dataFormType:"H"})},a.onItemViewClick=function(e){a.setState({viewForm:!0,dataFormID:e,dataFormType:"V"})},a.onAddClick=function(){a.setState({dataForm:!0,dataFormID:"",dataFormType:"A"})},a.onTableChange=function(e){a.props.dispatch({type:"authCode/fetch",pagination:{current:e.current,pageSize:e.pageSize}})},a.onTableSelectRow=function(e,t){a.setState({selectedRows:e,selectedRowsCon:t})},a.onResetFormClick=function(){a.props.form.resetFields();var e=a.props.location.query.record_id;a.props.dispatch({type:"authCode/saveSearch",payload:{}}),a.props.dispatch({type:"authCode/fetch",payload:{enterprise_id:e},pagination:{}})},a.onSearchFormSubmit=function(e){e&&e.preventDefault();var t=a.props.location.query.record_id,l=a.props.form.getFieldsValue();l.effective_start&&(l.effective_start=l.effective_start.unix()),l.effective_end&&(l.effective_end=l.effective_end.unix()),l.enterprise_id=t,a.props.dispatch({type:"authCode/fetch",payload:l})},a.onDataFormCallback=function(e,t){var l=a.props.location.query.record_id;a.setState({dataForm:!1,dataFormID:""}),e&&"ok"===e&&(a.setState({codeForm:!0,codeFormValue:t}),a.props.dispatch({type:"authCode/fetch",payload:{enterprise_id:l}}))},a.onCodeFormCallback=function(){a.setState({codeForm:!1,codeFormValue:""})},a.onViewFormCallback=function(){a.setState({viewForm:!1,dataFormID:""})},a.onHistoryFormCallback=function(){a.setState({historyForm:!1,dataFormID:""})},a}return(0,b.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.query.record_id;this.props.dispatch({type:"authCode/saveSearch",payload:{}}),this.props.dispatch({type:"authCode/fetch",payload:{enterprise_id:e},pagination:{}})}},{key:"renderDataForm",value:function(){var e=this.props.location.query;if(this.state.dataForm)return D.default.createElement(x.default,{id:this.state.dataFormID,type:this.state.dataFormType,info:e,callback:this.onDataFormCallback,enterId:this.props.location.query.record_id})}},{key:"renderCodeForm",value:function(){if(this.state.codeForm)return D.default.createElement(T.default,{value:this.state.codeFormValue,callback:this.onCodeFormCallback})}},{key:"renderViewForm",value:function(){var e=this.props.location.query;if(this.state.viewForm)return D.default.createElement(S.default,{id:this.state.dataFormID,type:this.state.dataFormType,info:e,callback:this.onViewFormCallback})}},{key:"renderHistoryForm",value:function(){var e=this.props.location.query;if(this.state.historyForm)return D.default.createElement(Y.default,{id:this.state.dataFormID,type:this.state.dataFormType,info:e,callback:this.onHistoryFormCallback})}},{key:"renderSearchForm",value:function(){var e=this.props.form.getFieldDecorator;return D.default.createElement(I.default,{onSubmit:this.onSearchFormSubmit,layout:"inline"},D.default.createElement(c.default,{gutter:{md:8,lg:24,xl:48}},D.default.createElement(s.default,{md:8,sm:24},D.default.createElement(I.default.Item,{label:"\u8ba4\u8bc1\u7801"},e("code")(D.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165"})))),D.default.createElement(s.default,{md:8,sm:24},D.default.createElement(I.default.Item,{label:"\u8ba4\u8bc1\u7c7b\u522b"},e("code_type")(D.default.createElement(O.default,{enterpriseID:this.props.location.query.record_id})))),D.default.createElement(s.default,{md:8,sm:24},D.default.createElement("div",{style:{overflow:"hidden"}},D.default.createElement("span",{style:{marginBottom:24}},D.default.createElement(f.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),D.default.createElement(f.default,{style:{marginLeft:8},onClick:this.onResetFormClick},"\u91cd\u7f6e"))))))}},{key:"render",value:function(){var e=this,t=this.props.authCode,a=t.loading,l=t.data,n=l.list,c=l.pagination,s=this.state,m=s.selectedRows,p=s.selectedRowsCon,h=[{title:"\u8ba4\u8bc1\u7801",dataIndex:"code",width:100},{title:"\u8ba4\u8bc1\u8eab\u4efd",dataIndex:"code_type",width:150,render:function(t){return D.default.createElement(V.default,{enterpriseID:e.props.location.query.record_id,code:t})}},{title:"\u751f\u6548\u65b9\u5f0f",dataIndex:"effective_mode",width:100,render:function(e){return 1===e?D.default.createElement("span",null,"\u6309\u65f6\u95f4"):D.default.createElement("span",null,"\u6309\u6b21\u6570")}},{title:"\u72b6\u6001",dataIndex:"status",width:100,render:function(e,t){if(1===e){if(1===t.effective_mode){if((0,A.getNowUnix)()>=t.effective_end)return D.default.createElement(i.default,{status:"warning",text:"\u6709\u6548(\u5df2\u8fc7\u671f)"})}else if(t.effective_number<=t.used_number)return D.default.createElement(i.default,{status:"warning",text:"\u6709\u6548(\u65e0\u5269\u4f59\u6b21\u6570)"});return D.default.createElement(i.default,{status:"success",text:"\u6709\u6548"})}return D.default.createElement(i.default,{status:"error",text:"\u4f5c\u5e9f"})}},{title:"\u5269\u4f59\u6b21\u6570/\u603b\u6b21\u6570",dataIndex:"effective_number",width:150,render:function(e,t){return 1===t.effective_mode?D.default.createElement("span",null,"-"):D.default.createElement("span",null,e-t.used_number,"/",e)}},{title:"\u6709\u6548\u671fFrom",dataIndex:"effective_start",width:200,render:function(e,t){return 2===t.effective_mode?D.default.createElement("span",null,"-"):D.default.createElement("span",null,(0,A.formatDate)(e,"YYYY/MM/DD"))}},{title:"\u6709\u6548\u671fTo",width:200,dataIndex:"effective_end",render:function(e,t){return 2===t.effective_mode?D.default.createElement("span",null,"-"):D.default.createElement("span",null,(0,A.formatDate)(e,"YYYY/MM/DD"))}}],v=(0,u.default)({showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return D.default.createElement("span",null,"\u5171",e,"\u6761")}},c),y=[{title:"\u4f01\u4e1a\u7ba1\u7406",href:"/enterprise/enterpriselist"},{title:"\u4f01\u4e1a\u8ba4\u8bc1\u7801\u7ba1\u7406",href:""}];return D.default.createElement(M.default,{title:"\u4f01\u4e1a\u8ba4\u8bc1\u7801\u7ba1\u7406",breadcrumbList:y},D.default.createElement(o.default,{bordered:!1},D.default.createElement("table",{width:"100%"},D.default.createElement("tbody",null,D.default.createElement("tr",null,D.default.createElement("td",null,D.default.createElement(d.default,{type:"info",showIcon:!0,message:"\u5f53\u524d\u6240\u5728\u4f01\u4e1a\uff1a".concat(this.props.location.query.name)})))))),D.default.createElement(o.default,{bordered:!1},D.default.createElement("div",{className:N.default.tableList},D.default.createElement("div",{className:N.default.tableListForm},this.renderSearchForm()),D.default.createElement("div",{className:N.default.tableListOperator},D.default.createElement(f.default,{icon:"plus",type:"primary",onClick:function(){return e.onAddClick()}},"\u65b0\u5efa"),1===m.length&&D.default.createElement("span",{className:N.default.delBtn},D.default.createElement(f.default,{icon:"view",type:"danger",onClick:function(){return e.onItemViewClick(m[0])}},"\u67e5\u770b")),1===m.length&&1===p[0].status&&D.default.createElement("span",{className:N.default.editBtn},D.default.createElement(f.default,{icon:"delete",type:"danger",onClick:function(){return e.onItemDisableClick(p[0])}},"\u4f5c\u5e9f")),1===m.length&&D.default.createElement("span",{className:N.default.editBtn},D.default.createElement(f.default,{icon:"delete",type:"danger",onClick:function(){return e.onItemListClick(m[0])}},"\u8ba4\u8bc1\u6e05\u5355"))),D.default.createElement("div",null,D.default.createElement(r.default,{rowSelection:{selectedRowKeys:m,selectedRows:p,onChange:this.onTableSelectRow,hideDefaultSelections:!0},loading:a,rowKey:function(e){return e.record_id},dataSource:n,columns:h,scroll:{x:1350},pagination:v,onChange:this.onTableChange})))),this.renderDataForm(),this.renderCodeForm(),this.renderViewForm(),this.renderHistoryForm())}}]),t}(D.PureComponent),_=F))||_)||_);t.default=R},owGW:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("p0pE"));a("OaEy");var o=n(a("2fM7")),d=n(a("2Taf")),u=n(a("vZ4D")),i=n(a("l4Ni")),c=n(a("ujKo")),f=n(a("MhPg")),s=l(a("q1tI")),m=a("e9aR"),p=function(e){function t(e){var a;return(0,d.default)(this,t),a=(0,i.default)(this,(0,c.default)(t).call(this,e)),a.handleChange=function(e){a.setState({value:e}),a.triggerChange(e)},a.triggerChange=function(e){var t=a.props.onChange;t&&t(e)},a.state={value:e.value,data:[]},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.enterpriseID;(0,m.queryEnterpriseUserType)({record_id:t}).then(function(t){e.setState({data:t.list||[]})})}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.data;return s.default.createElement(o.default,{value:t,onChange:this.handleChange,placeholder:"\u8bf7\u9009\u62e9\u7528\u6237\u7c7b\u578b",style:{width:"100%"}},a.map(function(e){return s.default.createElement(o.default.Option,{key:e.code,value:e.code},e.name)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"value"in e?(0,r.default)({},t,{value:e.value}):t}}]),t}(s.PureComponent);t.default=p},pnMX:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("fOrg");var r=l(a("+KLJ"));a("14J3");var o=l(a("BMrR"));a("y8nQ");var d=l(a("Vl3Y")),u=l(a("jehZ"));a("+L6B");var i=l(a("2/Rp"));a("2qtc");var c,f,s,m=l(a("kLXV")),p=l(a("2Taf")),h=l(a("vZ4D")),v=l(a("l4Ni")),y=l(a("ujKo")),E=l(a("rlhR")),C=l(a("MhPg")),b=n(a("q1tI")),g=a("MuoO"),k=l(a("8xrO")),_=a("+n12"),F=(c=(0,g.connect)(function(e){return{authCode:e.authCode}}),c((s=function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,v.default)(this,(e=(0,y.default)(t)).call.apply(e,[this].concat(n))),a.onModalCancelClick=function(){a.props.dispatch({type:"authCode/changeFormVisible",payload:!1}),a.props.callback()},a.onItemDisableOKClick=function(e){a.props.dispatch({type:"authCode/submitInvalid",payload:{record_id:e,status:2}})},a.onItemDisableClick=function(e){m.default.confirm({title:"\u786e\u5b9a\u4f5c\u5e9f\u8ba4\u8bc1\u7801\u3010".concat(e.code,"\u3011\uff1f"),okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:a.onItemDisableOKClick.bind((0,E.default)(a),e.record_id)})},a.onModalOKClick=function(){var e=a.props.authCode.formData;a.onItemDisableClick(e)},a}return(0,C.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.type,l=e.callback,n=e.info;this.props.dispatch({type:"authCode/loadForm",payload:{id:t,type:a,callback:l,info:n}})}},{key:"render",value:function(){var e=this.props,t=e.authCode,a=t.formTitle,l=t.formVisible,n=t.formData,c=t.submitting,f=e.info,s={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},p={};return 1===n.status?(p.cancelText="\u5173\u95ed",p.okText="\u4f5c\u5e9f",p.onOk=this.onModalOKClick):p.footer=b.default.createElement(i.default,{onClick:this.onModalCancelClick},"\u5173\u95ed"),b.default.createElement(m.default,(0,u.default)({title:a,width:600,visible:l,maskClosable:!1,confirmLoading:c,destroyOnClose:!0,onCancel:this.onModalCancelClick},p,{style:{top:20}}),b.default.createElement(d.default,null,b.default.createElement(d.default.Item,(0,u.default)({},s,{label:"\u4f01\u4e1a\u540d\u79f0"}),b.default.createElement("span",{className:"ant-form-text"},n.enterprise_name)),b.default.createElement(d.default.Item,(0,u.default)({},s,{label:"\u8ba4\u8bc1\u7801\u7c7b\u578b"}),b.default.createElement("span",{className:"ant-form-text"},n.code_type&&b.default.createElement(k.default,{enterpriseID:f.record_id,code:n.code_type}))),b.default.createElement(d.default.Item,(0,u.default)({},s,{label:"\u751f\u6548\u65b9\u5f0f"}),b.default.createElement("span",{className:"ant-form-text"},1===n.effective_mode?"\u65f6\u95f4":"\u6b21\u6570")),1===n.effective_mode&&b.default.createElement(d.default.Item,(0,u.default)({},s,{label:"\u6709\u6548\u671f"}),b.default.createElement("span",{className:"ant-form-text"},(0,_.formatDate)(n.effective_start,"YYYY/MM/DD")," ~"," ",(0,_.formatDate)(n.effective_end,"YYYY/MM/DD"))),2===n.effective_mode&&b.default.createElement(d.default.Item,(0,u.default)({},s,{label:"\u5269\u4f59\u6b21\u6570/\u603b\u6b21\u6570"}),b.default.createElement("span",{className:"ant-form-text"},n.effective_number-n.used_number,"/",n.effective_number,"\uff08\u6b21\uff09")),b.default.createElement(d.default.Item,(0,u.default)({},s,{label:"\u72b6\u6001"}),b.default.createElement("span",{className:"ant-form-text"},1===n.status?"\u6709\u6548":"\u4f5c\u5e9f"))),b.default.createElement("div",{style:{height:1,width:"100%",background:"#F0F0F0"}}),b.default.createElement(o.default,{style:{marginTop:10,marginBottom:10,textAlign:"center"}},b.default.createElement("span",{style:{fontSize:18}},"\u4f01\u4e1a\u8ba4\u8bc1\u7801\uff1a")),b.default.createElement(o.default,null,b.default.createElement(r.default,{showIcon:!1,type:"success",style:{textAlign:"center"},message:b.default.createElement("span",{style:{fontSize:48}},n.code)})),b.default.createElement(o.default,{style:{marginTop:10,marginBottom:10,textAlign:"center"}},b.default.createElement("span",{style:{color:"#A9A9A9",fontSize:14}},"\u8bf7\u590d\u5236\u4e0a\u9762\u7684\u8ba4\u8bc1\u7801\u53d1\u9001\u7ed9\u60a8\u7684\u5458\u5de5\u5b8c\u6210\u5458\u5de5\u8ba4\u8bc1")))}}]),t}(b.PureComponent),f=s))||f);t.default=F},vp8p:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=l(a("kLXV"));a("giR+");var o=l(a("fyUT"));a("iQDF");var d=l(a("+eQT"));a("7Kak");var u=l(a("9yH6")),i=l(a("jehZ")),c=l(a("p0pE")),f=l(a("2Taf")),s=l(a("vZ4D")),m=l(a("l4Ni")),p=l(a("ujKo")),h=l(a("MhPg"));a("y8nQ");var v,y,E,C,b=l(a("Vl3Y")),g=n(a("q1tI")),k=a("MuoO"),_=l(a("wd/R")),F=l(a("8+fH")),I=(v=(0,k.connect)(function(e){return{authCode:e.authCode,enterprise:e.enterprise}}),y=b.default.create(),v(E=y((C=function(e){function t(){var e,a;(0,f.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,m.default)(this,(e=(0,p.default)(t)).call.apply(e,[this].concat(n))),a.state={mode:"2"},a.onModalCancelClick=function(){a.props.dispatch({type:"authCode/changeFormVisible",payload:!1}),a.props.callback()},a.onModalOKClick=function(){var e=a.props.info;a.props.form.validateFieldsAndScroll(function(t,l){if(!t){var n=(0,c.default)({},l);if(n.effective_mode=parseInt(n.effective_mode,10),n.confirm_flag=parseInt(n.confirm_flag,10),n.effective_number=n.effective_number?parseInt(n.effective_number,10):0,n.effective_date){var r=n.effective_date;n.effective_start=(0,_.default)(r[0],"YYYY-MM-DD"),n.effective_end=(0,_.default)(r[1],"YYYY-MM-DD")}n.enterprise_id=e.record_id,a.props.dispatch({type:"authCode/submit",payload:n})}})},a.onChange=function(e){a.setState({mode:e.target.value})},a}return(0,h.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.type,l=e.callback,n=e.info,r=e.enterId;this.props.dispatch({type:"authCode/loadForm",payload:{id:t,type:a,callback:l,info:n}}),this.props.dispatch({type:"enterprise/loadFormTag",payload:r})}},{key:"render",value:function(){var e=this.props,t=e.info,a=e.authCode,l=a.formTitle,n=a.formVisible,c=a.formData,f=a.submitting,s=e.form.getFieldDecorator,m={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}};return g.default.createElement(r.default,{title:l,width:600,visible:n,maskClosable:!1,confirmLoading:f,destroyOnClose:!0,okText:"\u751f\u6210",onOk:this.onModalOKClick,onCancel:this.onModalCancelClick,style:{top:20}},g.default.createElement(b.default,null,g.default.createElement(b.default.Item,(0,i.default)({},m,{label:"\u4f01\u4e1a\u540d\u79f0"}),s("enterprise_name",{initialValue:c.enterprise_name})(g.default.createElement("span",{className:"ant-form-text"},c.enterprise_name))),g.default.createElement(b.default.Item,(0,i.default)({},m,{label:"\u8ba4\u8bc1\u7801\u7c7b\u578b"}),s("code_type",{initialValue:c.code_type,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8ba4\u8bc1\u7801\u7c7b\u578b"}]})(g.default.createElement(F.default,{enterpriseID:t.record_id}))),g.default.createElement(b.default.Item,(0,i.default)({},m,{label:"\u751f\u6548\u65b9\u5f0f"}),s("effective_mode",{initialValue:"2"})(g.default.createElement(u.default.Group,{onChange:this.onChange},g.default.createElement(u.default,{value:"1"},"\u65f6\u95f4"),g.default.createElement(u.default,{value:"2"},"\u6b21\u6570")))),"1"===this.state.mode&&g.default.createElement(b.default.Item,(0,i.default)({},m,{label:"\u6709\u6548\u65e5\u671f"}),s("effective_date",{required:!0,message:"\u8bf7\u9009\u62e9\u6709\u6548\u65e5\u671f"})(g.default.createElement(d.default.RangePicker,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}}))),"2"===this.state.mode&&g.default.createElement(b.default.Item,(0,i.default)({},m,{label:"\u8ba4\u8bc1\u6b21\u6570"}),s("effective_number",{initialValue:1})(g.default.createElement(o.default,{min:1,max:9999})))))}}]),t}(g.PureComponent),E=C))||E)||E);t.default=I}}]);