(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{yFBK:function(t,e,a){"use strict";var n=a("g09b"),o=a("tAuX");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("IzEo");var l=n(a("bx4M")),c=n(a("p0pE"));a("T2oS");var r=n(a("W9HT"));a("7Kak");var u=n(a("9yH6"));a("Pwec");var i=n(a("CtXQ"));a("2qtc");var d=n(a("kLXV")),s=n(a("2Taf")),f=n(a("vZ4D")),m=n(a("l4Ni")),p=n(a("ujKo")),C=n(a("MhPg"));a("y8nQ");var k,h,I,b,D=n(a("Vl3Y")),g=o(a("q1tI")),v=a("MuoO"),y=n(a("XZXw")),E=a("+n12"),w=a("e2PP"),S=a("riZX"),M=n(a("F6yL")),F=(k=(0,v.connect)(function(t){return{columnInfoManage:t.columnInfoManage,columnInfoCol:t.columnInfoCol}}),h=D.default.create(),k(I=h((b=function(t){function e(t){var a;(0,s.default)(this,e),a=(0,m.default)(this,(0,p.default)(e).call(this,t)),a.searchObj={status:[0,5]},a.onItemViewClick=function(t){a.setState({dataInfo:!0,dataInfoID:t})},a.onTableChange=function(t){a.props.dispatch({type:"columnInfoManage/fetch",pagination:{current:t.current,pageSize:t.pageSize}})},a.onSearch=function(t){a.props.dispatch({type:"columnInfoManage/fetch",payload:t})},a.onDataFormCallback=function(t){a.setState({dataForm:!1,dataFormID:""}),t&&"ok"===t&&a.props.dispatch({type:"columnInfoManage/fetch"})},a.onDataInfoCallback=function(){a.setState({dataInfo:!1,dataInfoID:""})},a.onTableCallback=function(t){"ok"===t&&a.props.dispatch({type:"columnInfoManage/fetch"})},a.onItemDesc=function(t,e){a.setState({dataForm:!0,dataFormID:e.info_id})},a.onColDescClick=function(t){a.showStep(0,t)},a.onColCtrlClick=function(t){a.showStep(1,t)},a.onColExtraClick=function(t){a.showStep(2,t)},a.onColLockClick=function(t){d.default.confirm({title:"\u786e\u5b9a\u9501\u5b9a\u8be5\u680f\u76ee\u5417\uff1f",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){a.props.dispatch({type:"columnInfoManage/colLock",payload:t,callback:a.refreshCol})}})},a.onColUnLockClick=function(t){d.default.confirm({title:"\u786e\u5b9a\u89e3\u9501\u8be5\u680f\u76ee\u5417\uff1f",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){a.props.dispatch({type:"columnInfoManage/colUnlock",payload:t,callback:a.refreshCol})}})},a.onDataColFormCallback=function(t){a.setState({dataColFormID:""}),t&&"ok"===t&&a.refreshCol(),a.showStep(-1)},a.onColDetailClick=function(t){a.setState({dataDetail:!0,dataColumnID:t})},a.onColDetailCallback=function(){a.setState({dataDetail:!1,dataColumnID:""})},a.onDataInfoCallback=function(t){a.setState({dataInfo:!1,dataInfoID:""}),t&&"ok"===t&&a.props.dispatch({type:"columnInfoManage/fetch"})},a.refreshCol=function(){a.props.dispatch({type:"columnInfoManage/refreshCol"})},a.handleColClick=function(t){var e=a.props.match.params.columnid;switch(t){case"detail":a.onColDetailClick(e);break;case"desc":a.onColDescClick(e);break;case"ctl":a.onColCtrlClick(e);break;case"extra":a.onColExtraClick(e);break;case"del":a.onColDeleteClick(e);break;case"lock":a.onColLockClick(e);break;case"unlock":a.onColUnLockClick(e);break;default:}a.setState({key:""})},a.showStep=function(t,e){a.setState({step:t,dataColFormID:e})},a.renderDataInfo=function(){if(a.state.dataInfo)return g.default.createElement(w.InfoCard,{id:a.state.dataInfoID,callback:a.onDataInfoCallback})},a.renderColDataForm=function(){if(a.state.step>-1)return g.default.createElement(S.ColumnEdit,{columnId:a.state.dataColFormID,step:a.state.step,callback:a.onDataColFormCallback})},a.renderColDataDetail=function(){if(a.state.dataDetail)return g.default.createElement(S.ColumnCard,{id:a.state.dataColumnID,callback:a.onColDetailCallback,visible:!0})},a.renderColOp=function(){var t=a.props.columnInfoManage.column;if("status"in t)return g.default.createElement(u.default.Group,{value:a.state.key,onChange:function(t){return a.handleColClick(t.target.value)}},g.default.createElement(u.default.Button,{value:"detail"},g.default.createElement(i.default,{type:"detail"}),"\u680f\u76ee\u660e\u7ec6"),0===t.status.status&&g.default.createElement(u.default.Button,{value:"desc"},g.default.createElement(i.default,{type:"edit"}),"\u4fee\u6539\u63cf\u8ff0"),0===t.status.status&&g.default.createElement(u.default.Button,{value:"ctl"},g.default.createElement(i.default,{type:"edit"}),"\u63a7\u5236\u53c2\u6570"),0===t.status.status&&g.default.createElement(u.default.Button,{value:"extra"},g.default.createElement(i.default,{type:"edit"}),"\u6269\u5c55\u5c5e\u6027"),0===t.status.status&&g.default.createElement(u.default.Button,{value:"lock"},g.default.createElement(i.default,{type:"lock"}),"\u9501\u5b9a"),1===t.status.status&&g.default.createElement(u.default.Button,{value:"unlock"},g.default.createElement(i.default,{type:"unlock"}),"\u89e3\u9501"))},a.renderNewButton=function(){var t=a.props.columnInfoManage,e=t.loading,n=t.column;if(e)return g.default.createElement(r.default,null);var o={callback:a.onDataFormCallback,column:a.columnid,hideColumn:!0,hideOrg:!0};a.state.dataForm&&(o.id=a.state.dataFormID,o.datatype=a.state.dataType);var l={visible:a.state.dataForm,edit:o};return 1===n.ctl_param.deny_info_kind_all&&n.ctl_param.allow_info_kinds&&n.ctl_param.allow_info_kinds.length>0&&(l.showKinds=n.ctl_param.allow_info_kinds),g.default.createElement(w.NewButton,l)};var n=t.match.params,o=n.columnid,l=n.listmode;return a.state={dataForm:!1,dataInfo:!1,dataInfoID:"",step:-1},a.columnid=o,a.listmode=l,a}return(0,C.default)(e,t),(0,f.default)(e,[{key:"componentDidMount",value:function(){var t=this.props.match.params,e=t.columnid,a=t.listmode;this.props.dispatch({type:"columnInfoManage/init",searchObj:this.searchObj,columnid:e,listmode:1*a})}},{key:"shouldComponentUpdate",value:function(t){var e=t.match.params,a=e.columnid,n=e.listmode,o=!1;return a!==this.columnid&&(this.columnid=a,o=!0),n!==this.listmode&&(this.listmode=n,o=!0),o&&this.props.dispatch({type:"columnInfoManage/init",searchObj:this.searchObj,columnid:a,listmode:1*n}),!0}},{key:"render",value:function(){var t=this,e=this.props.columnInfoManage,a=e.loading,n=e.column,o=e.data,r=o.list,u=o.pagination,i=[{title:"\u6807\u9898",dataIndex:"desc.title"},{title:"\u72b6\u6001",dataIndex:"status.status",render:function(t){return g.default.createElement(w.InfoStatus,{code:t})}},{title:"\u521b\u5efa\u7528\u6237",dataIndex:"operator.creator",render:function(t){return g.default.createElement(M.default,{uid:t})}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"operator.cre_time",render:function(t){return g.default.createElement("span",null," ",(0,E.parseUtcTime)(t)," ")}}],d=(0,c.default)({},u),s=n.desc,f="";s&&s.name&&(f="".concat(s.name,"\u7ba1\u7406"));var m={column:1,org:1};n&&n.desc&&(0===n.desc.kind?m.org=1:1===n.desc.kind&&(m.org=0));var p={title:function(){return g.default.createElement("div",null,t.renderNewButton(),t.renderColOp())},loading:a,rowKey:function(t){return t.info_id},dataSource:r,columns:i,pagination:d,onChange:this.onTableChange,scroll:{x:840},onRow:function(e){return{onClick:function(){t.onItemViewClick(e.info_id)}}}};return g.default.createElement(y.default,{title:f},g.default.createElement(l.default,{bordered:!1},g.default.createElement(w.InfoSearch,{onSearch:this.onSearch,hide:m,searchObj:this.searchObj}),g.default.createElement(w.InfoTableList,{tableProps:p,onCallBack:function(e){return t.onTableCallback(e)},infoOps:{edit:{handler:function(e){t.onItemDesc(e.infoid,e)}}}})),this.renderDataInfo(),this.renderColDataForm(),this.renderColDataDetail())}}]),e}(g.Component),I=b))||I)||I);e.default=F}}]);