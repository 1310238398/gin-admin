(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[63],{ZLZX:function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var l=n(a("bx4M"));a("5NDa");var o=n(a("5rEg")),c=n(a("p0pE"));a("+BJd");var d=n(a("mr32"));a("Awhp");var u=n(a("KrTs"));a("2qtc");var f=n(a("kLXV")),i=n(a("2Taf")),s=n(a("vZ4D")),p=n(a("l4Ni")),m=n(a("ujKo")),h=n(a("MhPg"));a("y8nQ");var g,E,I,v,y=n(a("Vl3Y")),w=r(a("q1tI")),k=a("MuoO"),D=n(a("XZXw")),b=a("+n12"),S=n(a("b/es")),C=n(a("F6yL")),M=a("6LfW"),_=n(a("LeT2")),T=a("w7Oj"),x=n(a("2c58")),$=a("e2PP"),P=(g=(0,k.connect)(function(e){return{reportManage:e.reportManage}}),E=y.default.create(),g(I=E((v=function(e){function t(){var e,a;(0,i.default)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=(0,p.default)(this,(e=(0,m.default)(t)).call.apply(e,[this].concat(r))),a.state={dataInfo:!1,dataInfoID:""},a.onItemViewClick=function(e){a.setState({dataInfo:!0,dataInfoID:e})},a.onTableChange=function(e){a.props.dispatch({type:"reportManage/fetch",pagination:{current:e.current,pageSize:e.pageSize}})},a.onSearch=function(e){e&&e.preventDefault();var t=a.props.form.getFieldsValue();a.props.dispatch({type:"reportManage/fetch",payload:t})},a.onItemDeleteClick=function(e,t){f.default.confirm({title:"\u786e\u5b9a\u5220\u9664\u8be5\u6570\u636e\u5417\uff1f",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){a.props.dispatch({type:"reportManage/del",payload:t.info_id})}})},a.onDataInfoCallback=function(){a.setState({dataInfo:!1,dataInfoID:""})},a.creOps=function(e){var t=[{icon:"view",name:"\u67e5\u770b",handler:function(){return a.onItemDescClick(e.report_id)}},{icon:"delete",name:"\u5220\u9664",handler:function(){return a.onItemDeleteClick(e.column_id)}}];return t},a.renderDataInfo=function(){if(a.state.dataInfo)return w.default.createElement(S.default,{id:a.state.dataInfoID,callback:a.onDataInfoCallback})},a}return(0,h.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"reportManage/saveSearch",payload:{}}),this.props.dispatch({type:"reportManage/fetch",payload:{status:[0,1]}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.reportManage,n=a.loading,r=a.data,f=r.list,i=r.pagination,s=t.form.getFieldDecorator,p=[{title:"\u72b6\u6001",dataIndex:"desc.status",width:120,render:function(e){var t=["processing","success"],a="processing";return e>=0&&(a=t[e]?t[e]:a),w.default.createElement(M.DicShow,{pcode:"cms$#report$#status",code:[e],show:function(e,t){return w.default.createElement(u.default,{key:"".concat(e,"_").concat(t),status:a,text:e})}})}},{title:"\u5185\u5bb9",dataIndex:"desc.content",width:350},{title:"\u76ee\u6807\u7c7b\u578b",dataIndex:"desc.target_type",width:120,render:function(e){return w.default.createElement(M.DicShow,{pcode:"cms$#report$#targettype",code:[e]})}},{title:"\u6807\u7b7e",dataIndex:"desc.tags",width:200,render:function(e){return w.default.createElement(M.DicShow,{pcode:"cms$#report$#type",code:e,show:function(e){return w.default.createElement(d.default,null,e)}})}},{title:"\u4e3e\u62a5\u4eba",dataIndex:"desc.uid",width:100,render:function(e){return w.default.createElement(C.default,{uid:e})}},{title:"\u4e3e\u62a5\u65f6\u95f4",dataIndex:"desc.rep_time",width:200,render:function(e){return w.default.createElement("span",null," ",(0,b.parseUtcTime)(e)," ")}}],m=(0,c.default)({},i),h={loading:n,rowKey:function(e){return e.report_id},dataSource:f,columns:p,pagination:m,onChange:this.onTableChange,scroll:{x:1500},onRow:function(t){return{onClick:function(){e.onItemViewClick(t.report_id)}}}};return w.default.createElement(D.default,{title:"\u6295\u8bc9\u4e3e\u62a5\u7ba1\u7406"},w.default.createElement(l.default,{bordered:!1},w.default.createElement(T.SearchCard,{onSearch:this.onSearch,form:this.props.form},w.default.createElement(T.SearchItem,{label:"\u5173\u952e\u5b57"},s("key",{})(w.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u5b57"}))),w.default.createElement(T.SearchItem,{label:"\u72b6\u6001"},s("status",{})(w.default.createElement(M.DicSelect,{pcode:"cms$#report$#status",selectProps:{mode:"multiple",placeholder:"\u8bf7\u9009\u62e9"}}))),w.default.createElement(T.SearchItem,{label:"\u76ee\u6807\u7c7b\u578b"},s("typ",{})(w.default.createElement(M.DicSelect,{pcode:"cms$#report$#targettype",selectProps:{placeholder:"\u8bf7\u9009\u62e9"}}))),w.default.createElement(T.SearchItem,{label:"\u4e3e\u62a5\u6807\u7b7e"},s("tags",{})(w.default.createElement(M.DicSelect,{pcode:"cms$#report$#type",selectProps:{placeholder:"\u8bf7\u9009\u62e9",showSearch:!0}}))),w.default.createElement(T.SearchItem,{label:"\u4e3e\u62a5\u7528\u6237"},s("uid",{})(w.default.createElement(x.default,null))),w.default.createElement(T.SearchItem,{label:"\u4e3e\u62a5\u65f6\u95f4"},s("repTime",{})(w.default.createElement($.SchTime,{isRange:!0})))),w.default.createElement(_.default,h)),this.renderDataInfo())}}]),t}(w.PureComponent),I=v))||I)||I);t.default=P},"b/es":function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bbsP");var l=n(a("/wGt"));a("IzEo");var o=n(a("bx4M"));a("5NDa");var c=n(a("5rEg"));a("+L6B");var d=n(a("2/Rp"));a("/zsF");var u=n(a("PArb"));a("+BJd");var f=n(a("mr32"));a("fu2T");var i=n(a("gK9i"));a("T2oS");var s=n(a("W9HT"));a("Awhp");var p=n(a("KrTs"));a("miYZ");var m,h,g,E=n(a("tsqr")),I=n(a("2Taf")),v=n(a("vZ4D")),y=n(a("l4Ni")),w=n(a("ujKo")),k=n(a("MhPg")),D=r(a("q1tI")),b=a("MuoO"),S=n(a("+kNj")),C=a("6LfW"),M=a("+n12"),_=n(a("F6yL")),T=a("e2PP"),x=a("hyxQ"),$=S.default.Description,P=(m=(0,b.connect)(function(e){return{reportManage:e.reportManage,target:e.target1}}),m((g=function(e){function t(){var e,a;(0,I.default)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=(0,y.default)(this,(e=(0,w.default)(t)).call.apply(e,[this].concat(r))),a.state={dataInfo:!1,dataInfoID:""},a.onClose=function(){a.props.callback()},a.onModalOKClick=function(){a.props.callback()},a.showExtra=function(){var e=a.props.reportManage.formData,t=e.ctrl;if(t){var n=e.desc;return t.map(function(e){var t=n&&n.extras&&n.extras[e.code]?n.extras[e.code]:"";return D.default.createElement($,{term:e.name},t)})}},a.onPublish=function(e){a.props.dispatch({type:"reportManage/publish",payload:e.info_id})},a.onInfoViewClick=function(e){a.setState({dataInfo:!0,dataInfoID:e})},a.handlerDo=function(){a.value?a.props.dispatch({type:"reportManage/do",payload:{id:a.props.id,result:a.value}}):E.default.warning("\u5904\u7406\u610f\u89c1\u4e0d\u80fd\u4e3a\u7a7a\u3002")},a.showStatus=function(e){var t=["processing","success"],a="processing";return e>=0&&(a=t[e]?t[e]:a),D.default.createElement(C.DicShow,{pcode:"cms$#report$#status",code:[e],show:function(e,t){return D.default.createElement(p.default,{key:"".concat(e,"_").concat(t),status:a,text:e})}})},a.chgTarget=function(e){var t=!1,n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var d=o.value;"1"===d&&(t=!0)}}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}if(t){var u=a.props,f=u.target,i=f.data,s=f.loading,p=u.reportManage.formData.desc;s||i.info_id||p&&1===p.target_type&&a.props.dispatch({type:"target/fetchInfo",payload:{infoid:p.target_id}})}},a.onDataInfoCallback=function(){a.setState({dataInfo:!1,dataInfoID:""})},a.renderDataInfo=function(){if(a.state.dataInfo)return D.default.createElement(T.InfoCard,{id:a.state.dataInfoID,callback:a.onDataInfoCallback})},a.renderInfo=function(){var e=a.props,t=e.target,n=t.data,r=t.loading,l=e.reportManage.formData.desc;return r?D.default.createElement(s.default,null):n.info_id&&l?D.default.createElement(S.default,{col:"1"},D.default.createElement($,{term:"\u76ee\u6807\u7c7b\u578b"},D.default.createElement(C.DicShow,{pcode:"cms$#report$#targettype",code:[l.target_type]}),"-",D.default.createElement(C.DicShow,{pcode:"cms$#infos$#kind",code:[n.desc.kind]})),n.desc.title&&D.default.createElement($,{term:"\u76ee\u6807\u6807\u9898",onClick:function(){return a.onInfoViewClick(l.target_id)}},n.desc.title),!n.desc.title&&D.default.createElement($,{term:"\u76ee\u6807\u5185\u5bb9"},D.default.createElement("a",{onClick:function(){return a.onInfoViewClick(l.target_id)}},D.default.createElement(x.ContentShow,{content:n.desc.content})))):void 0},a}return(0,k.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.callback,a=e.id;this.props.dispatch({type:"reportManage/saveFormCallback",payload:{callback:t}}),this.props.dispatch({type:"reportManage/getInfo",payload:{id:a,callback:t}})}},{key:"render",value:function(){var e=this,t=this.props.reportManage.formData,a=t.desc,n=t.result;return D.default.createElement(l.default,{title:"\u6295\u8bc9\u4e3e\u62a5",placement:"right",destroyOnClose:!0,closable:!1,onClose:this.onClose,visible:!0,width:"50%"},D.default.createElement(o.default,{loading:!a},D.default.createElement(i.default,{defaultActiveKey:["2","3"],onChange:this.chgTarget},D.default.createElement(i.default.Panel,{header:"\u4e3e\u62a5\u76ee\u6807",key:"1"},a&&1===a.target_type&&this.renderInfo(a.target_id)),a&&D.default.createElement(i.default.Panel,{header:"\u4e3e\u62a5\u5185\u5bb9",key:"2"},D.default.createElement(S.default,{col:"2"},D.default.createElement($,{term:"\u72b6\u6001"},this.showStatus(a.status)),D.default.createElement($,{term:"\u4e3e\u62a5\u65f6\u95f4"},(0,M.parseUtcTime)(a.rep_time)),D.default.createElement($,{term:"\u4e3e\u62a5\u7528\u6237"},D.default.createElement(_.default,{uid:a.uid}))),D.default.createElement(S.default,{col:"1"},D.default.createElement($,{term:"\u6807\u7b7e"},D.default.createElement(C.DicShow,{pcode:"cms$#report$#type",code:a.tags,show:function(e){return D.default.createElement(f.default,null,e)}}))),D.default.createElement(u.default,null),D.default.createElement(S.default,{col:"1"},D.default.createElement($,{term:"\u5185\u5bb9"},D.default.createElement(x.ContentShow,{content:a.content})))),D.default.createElement(i.default.Panel,{header:"\u4e3e\u62a5\u76ee\u6807",key:"3"},a&&1===a.status&&D.default.createElement(S.default,{col:"2"},D.default.createElement($,{term:"\u5904\u7406\u4eba"},D.default.createElement(_.default,{uid:n.proc_uid})),D.default.createElement($,{term:"\u5904\u7406\u65f6\u95f4"},D.default.createElement(_.default,{uid:(0,M.parseUtcTime)(n.proc_time)}))),a&&1===a.status&&D.default.createElement(S.default,{col:"1"},D.default.createElement($,{term:"\u5904\u7406\u610f\u89c1"},n.result)),a&&0===a.status&&D.default.createElement(o.default,{title:"\u5904\u7406\u610f\u89c1",actions:[D.default.createElement(d.default,{onClick:function(){return e.handlerDo()}},"\u5904\u7406\u5b8c\u6210")]},D.default.createElement(c.default.TextArea,{onChange:function(t){e.value=t.target.value}}))))),this.renderDataInfo())}}]),t}(D.PureComponent),h=g))||h);t.default=P}}]);